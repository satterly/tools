<!doctype html>
<html class="no-js " lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=IE9" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
  <meta charset="utf-8">

    <style>
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: bold;
      src: local("SourceSansPro-Bold");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: italic;
      font-weight: bold;
      src: local("SourceSansPro-BoldIt");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 200;
      src: local("SourceSansPro-ExtraLight");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: italic;
      font-weight: normal;
      src: local("SourceSansPro-It");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 300;
      src: local("SourceSansPro-Light");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: normal;
      src: local("SourceSansPro-Regular");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 600;
      src: local("SourceSansPro-Semibold");
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Regular.otf.woff") format('woff');
      font-weight: normal;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-It.otf.woff") format('woff');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Bold.otf.woff") format('woff');
      font-weight: bold;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Semibold.otf.woff") format('woff');
      font-weight: 600;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-BoldIt.otf.woff") format('woff');
      font-weight: bold;
      font-style: italic
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Light.otf.woff") format('woff');
      font-weight: 300;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-ExtraLight.otf.woff") format('woff');
      font-weight: 200;
      font-style: normal
    }
    @font-face {
      font-family: "KaTeX_AMS";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_AMS-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_AMS-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Caligraphic";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Caligraphic";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Regular.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Fraktur";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Fraktur";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Bold.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-BoldItalic.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-BoldItalic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Italic.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Regular.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Math";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-BoldItalic.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-BoldItalic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Math";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-Italic.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Italic.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Script";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Script-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Script-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size1";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size1-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size1-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size2";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size2-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size2-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size3";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size3-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size3-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size4";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size4-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size4-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Typewriter";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Typewriter-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Typewriter-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
  </style>

  <title>alerta/chat - Gitter</title>

  <style>

  @-webkit-keyframes pulsey {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
  }

  html.loading .trpContentPanel { background: url("//cdn01.gitter.im/_s/0d31b2aef/images/logo-mark-grey-64.png") center no-repeat; height: 90%; -webkit-animation: pulsey 2s ease-out; -webkit-animation-iteration-count: infinite;  }
  html.loading .trpContentPanel > * { visibility: hidden; }
  </style>
  <base target="_parent">
  <link rel="stylesheet" href='//cdn01.gitter.im/_s/0d31b2aef/sprites/services.css'>
  <link rel="stylesheet" href='//cdn02.gitter.im/_s/0d31b2aef/styles/router-archive-chat.css'>
  <link id="favicon" rel="shortcut icon" href="//cdn02.gitter.im/_s/0d31b2aef/images/favicon.ico">
</head>
<body class="logged-out">
  <div class="chat-and-toolbar-wrapper archive">
    <div class="right-toolbar-region">
      <div class="right-toolbar" style="overflow: auto">
        <div class="gtrArchiveToolbarWrapper">
            <div class="gtrArchiveInfoContainer">
                <div class="gtrArchiveLogo">
                  <div class="logo-container"></div>
                </div>
                <div class="gtrArchiveInfo">
                  <p>These are chat archives for <strong>alerta/chat</strong></p>
                </div>
            </div>

          <div id="archive-navigation" class="gtrArchiveNavigationWrapper"><div class="gtrArchiveNavigationInner">
  <div class="gtrArchiveDate">
    <a href="/alerta/chat/archives/2017/08/12"><i class="gtrArchiveNext octicon octicon-chevron-right"></i></a>
    <a href="/alerta/chat/archives/2017/08/10"><i class="gtrArchivePrev octicon octicon-chevron-left"></i></a>
    <div class="gtrArchiveToday">
      <span class="gtrArchiveDay">11<sup>th</sup></span><br>
      <span class="gtrArchiveMonth">Aug 2017</span>
    </div>
  </div>

  <div class="archive-toggle-navigation-action-holder">
    <button class="button-jaffa--small js-toggle-archive-navigation">Toggle Heatmap</button>
  </div>
  <div id="archive-navigation" class="gtrArchiveCalendar js-archive-navigation-wrapper">
  </div>
</div>
</div>
            <div class="archive-right-toolbar-button-wrapper">
              <a href="/login?action=login&amp;button=archive-login" class="archive-right-toolbar-button button-caribbean">Sign in to start talking</a>
            </div>
        </div>
      </div>
    </div>
    <div class="chat-app">
      <div class="chat-header" id="header-wrapper">
        <div id="header" class="chat-header-inner">
          <div class="chat-header__main-grouping chat-header__left-menu-toggle-grouping">
  <button class="chat-header__left-menu-toggle js-header-view-left-menu-toggle">
    <svg class="chat-header__action-icon" viewBox="0 0 26 22">
      <path d="M0,2 l26,0" />
      <path d="M0,11 l26,0" />
      <path d="M0,20 l26,0" />
    </svg>
  </button>
</div>

<div class="chat-header__main-grouping chat-header__avatar-grouping">
  <form
    class="chat-header__avatar  js-chat-header-group-avatar-upload-form"
    action=""
    enctype="multipart/form-data"
    method="POST">
    <input type="hidden" class="js-chat-header-group-avatar-upload-signature" name="signature" value="">
    <input type="hidden" class="js-chat-header-group-avatar-upload-params" name="params" value="">
    <input
      id="chat-header-group-avatar-upload-input"
      class="chat-header__group-avatar-upload-input js-chat-header-group-avatar-upload-input"
      name="file"
      type="file"
      accept="image/*"
      disabled />
    <label
      class="chat-header__group-avatar-upload-label js-chat-header-group-avatar-upload-label"
      for="chat-header-group-avatar-upload-input"
      >
      <img class="js-chat-header-avatar-image"  height='48' width='48' src='https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b?s=48' srcset='https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b?s=96 2x' >
      <div class="chat-header__group-avatar-upload-progress hidden js-chat-header-group-avatar-upload-progress"></div>
    </label>
  </form>
</div>

<div class="chat-header__main-grouping chat-header__info-grouping">
  <div class="chat-header__heading-sub-group">
    <h1 class="js-chat-name chat-header__heading">
      <a href="/alerta/chat" class="chat-header__title">alerta/chat</a>
    </h1>
  </div>
  <div class="chat-header__topic-sub-group js-room-topic-edit-activator" tabindex="0">
    <div class="chat-header__topic-wrapper js-room-topic-wrapper  "><p class="js-room-topic chat-header__topic  ">Alerta web next gen https://beta.alerta.io</p></div>
  </div>
</div>


<div class="chat-header__main-grouping chat-header__action-grouping">
    <a href="/orgs/alerta/rooms" class="chat-header__org-page org-page-link js-chat-header-org-page-action" title="More alerta rooms">
      <i class="chat-header__action-icon icon-globe"></i>
    </a>

</div>

        </div>
      </div>
      <div class="trpContentPanel archive" id="content-wrapper">
  <div class="trpChatPanel">
    <div class="trpChatContainer  primary-scroll  chat-container" id="content-frame">

      <div id="chat-container" role="list">
        <div>
            <div class="chat-item model-id-598d6dc776a757f80894533a burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609b0b20fc9f982beb21fdb avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Anton</div>
      <div class='chat-item__username js-chat-item-from'>@tester22</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d6dc776a757f80894533a' title="">Aug 11 2017 08:41 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> I want to run some plugins on status change. The first plugin adds some attributes to the alert and based on the result of those attribute values the second plugin should be executed. Right now it seems that the alert attribute isn&#39;t updated with the changed attributes. Do I need to call the db function to get updated attributes or is there another way?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7bf051915d962af7b64f burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d7bf051915d962af7b64f' title="">Aug 11 2017 09:42 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      yes. there’s an example in the origin PR description <span data-link-type="issue" data-issue="213" data-issue-repo="guardian/alerta" class="issue">guardian/alerta#213</span> 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7c0351915d962af7b652 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      I shoud add this to  the plugin documentation
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7c6742d2f6102588e6bc burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      the prometheus plugin is a better example <a href="https://github.com/alerta/alerta-contrib/blob/master/plugins/prometheus/alerta_prometheus.py" rel="nofollow noopener noreferrer" target="_blank" class="link">https://github.com/alerta/alerta-contrib/blob/master/plugins/prometheus/alerta_prometheus.py</a>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7cc0ee5c9a4c5fae5bda burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609b0b20fc9f982beb21fdb avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Anton</div>
      <div class='chat-item__username js-chat-item-from'>@tester22</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d7cc0ee5c9a4c5fae5bda' title="">Aug 11 2017 09:45 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Hi, I think you misunderstood. Plugin 1 is setting the attribute, this works great.<br>The problem is that when plugin 2 is running the attribute added by plugin 1 is missing in the alert body. Basically what I am after is that the plugins can share information by adding it as attributes.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7ce642d2f6102588e6c1 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d7ce642d2f6102588e6c1' title="">Aug 11 2017 09:46 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      ok. are you sure they are running in the order you expect?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7cfb51915d962af7b667 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      they should run in the order listed in the PLUGINS setting. if not, that’s a bug.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7d5c0cef4fed2eb8fb82 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      are you running <code>db.update_attributes()</code> in the first plugin? 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7dc176a757f808948f80 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609b0b20fc9f982beb21fdb avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Anton</div>
      <div class='chat-item__username js-chat-item-from'>@tester22</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d7dc176a757f808948f80' title="">Aug 11 2017 09:49 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      It seems like they are running in the right order. My workflow is that the first plugin creates an JIRA issue and adds the attribute JiraKey. The next plugin is OP5 that is acknowledging the alert and adds the JiraKey to the server event log and acknowledges the problem.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7df72723db8d5e944e53 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      When I print to console I am missing the added attribute in the output of the second plugin.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d7e1880d90ca024eb92e0 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      Yes, I am using db.update_attributes()
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d87e797cedeb04827c1e0 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d87e797cedeb04827c1e0' title="">Aug 11 2017 10:33 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      can you share the plugins with me online? have you checked them into GitHub or can you put them on pastebin or the like?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d8828162adb6d2ee6c4fb burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609b0b20fc9f982beb21fdb avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Anton</div>
      <div class='chat-item__username js-chat-item-from'>@tester22</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d8828162adb6d2ee6c4fb' title="">Aug 11 2017 10:34 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Sure, but not at my computer right now. Maybe the best thing is to run db.get_alert() in the second plugin to make sure it have the most recent data. 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d89191c8697534aaa71ab burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      To me it looks like the problem is here: <a href="https://github.com/guardian/alerta/blob/master/alerta/app/utils.py#L273" rel="nofollow noopener noreferrer" target="_blank" class="link">https://github.com/guardian/alerta/blob/master/alerta/app/utils.py#L273</a>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d891dbc4647297472d285 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      All plugins are executed with the same alert
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d892f614889d4753ac9be burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      Isn&#39;t an reload of alert needed?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d91f60cef4fed2eb8fcc9 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d91f60cef4fed2eb8fcc9' title="">Aug 11 2017 11:16 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Hmmm. i think you’re right. that could result in a lot of unnecessary db calls though.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d927251915d962af7b74e burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      i might have to think about this a bit more.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d927d80d90ca024ebe14e burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609b0b20fc9f982beb21fdb avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Anton</div>
      <div class='chat-item__username js-chat-item-from'>@tester22</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d927d80d90ca024ebe14e' title="">Aug 11 2017 11:18 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Yes, but then I will add it to plugin nr 2. Or write an new plugin that communicates with both services.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598d92d742d2f6102588e7cc burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598d92d742d2f6102588e7cc' title="">Aug 11 2017 11:19 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      I see. yes. calling db.get_alert() in plugin nr 2 could/should work.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598e251b210ac26920757b14 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609b0b20fc9f982beb21fdb avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/289504?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Anton</div>
      <div class='chat-item__username js-chat-item-from'>@tester22</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598e251b210ac26920757b14' title="">Aug 11 2017 21:43 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Thanks it works, this is the server log in OP5:
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598e2524a7b406262d7d8980 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      <a href="https://files.gitter.im/alerta/chat/g8QI/image.png" rel="nofollow noopener noreferrer" target="_blank" class="link"><img src="https://files.gitter.im/alerta/chat/g8QI/thumb/image.png" alt="image.png" rel="nofollow"></a>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598e2553210ac26920757be8 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      This is in my second plugin right after if status == &quot;ack&quot;:
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598e2555c101bc4e3a0cd523 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      try:<br>                db_alert = json.loads(str(db.get_alert(id=alert.id)))<br>                text = &quot;Jira Issue: &quot; +  db_alert[&#39;attributes&#39;][&#39;JiraKey&#39;]<br>            except: pass
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-598e26acee5c9a4c5fb11192 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2017/08/11?at=598e26acee5c9a4c5fb11192' title="">Aug 11 2017 21:50 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Nice one. Good work. 
    </div>
  </div>
</div>
</div>
        </div>
      </div>

      <div id='initial' style="height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>
    </div>
  </div>
</div>

    </div>
  </div>

    <script type="text/javascript">window.gitterClientEnv = {"lang":"en","domain":"gitter.im","baseServer":"gitter.im","basePath":"https://gitter.im","apiBasePath":"https://gitter.im/api","homeUrl":"/","badgeBaseUrl":"https://badges.gitter.im","googleTrackingId":"UA-45918290-1","googleTrackingDomain":"gitter.im","env":"prod","cdns":["cdn01.gitter.im","cdn02.gitter.im","cdn03.gitter.im"],"version":"0d31b2","assetTag":"0d31b2aef","logging":false,"ravenUrl":"https://a1bf037f1d5f46f28b8e3b3e82024654@sentry.gitlab.net/42","websockets":{"fayeUrl":"https://ws.gitter.im/bayeux","options":{"timeout":120,"retry":2}},"avatarsUrl":"https://avatars.gitter.im","avatarCdns":["https://avatars-01.gitter.im","https://avatars-02.gitter.im","https://avatars-03.gitter.im","https://avatars-04.gitter.im","https://avatars-05.gitter.im"],"vapidAppServerKey":"BMhrlZd_I5OFJSJQTbg2mZ5PTHarzenwsKfsRd8C0-HRBygpDj9O3M4VTJIQfB9VPDjAoO_w2eg7Sj_cMXzuLwI","headlineNumbers":{"gitterUsers":"800K+","gitterRooms":"300K+","gitterGroups":"90K+","gitterCountries":"100+"},"inviteEmailAbuseThresholdPerDay":10};window.troupeContext = {"accessToken":"$yT633kfnubNvbas220dJmZAydWuU8kpiIJdV1YAu0mc=","isNativeDesktopApp":false,"locale":{"%d unread message":{"one":"%d unread message","other":"%d unread messages"},"Unread messages in %%s, %%s and one other":{"one":"Unread messages in %%s, %%s and one other","other":"Unread messages in %%s, %%s and %d others"},"Unread messages in %s":"Unread messages in %s","Unread messages in %s and %s":"Unread messages in %s and %s","Unread messages from %s":"Unread messages from %s","Unread messages from %s and %s":"Unread messages from %s and %s","Unread messages from %%s, %%s and one other":{"one":"Unread messages from %%s, %%s and one other","other":"Unread messages from %%s, %%s and %d others"},"Gitter is available in all modern browsers as well as apps for desktops.":"Gitter is available in all modern browsers as well as apps for desktops.","Mac":"Mac","Windows":"Windows","Linux 32":"Linux 32","Linux 64":"Linux 64","The above Mac installer is a signed version of 1.177 (backed by Safari). For an unsigned 4.1.0 installer (backed by <a %s>NW.js<\/a>), <a %s>click here to download<\/a>.":"The above Mac installer is a signed version of 1.177 (backed by Safari). For an unsigned 4.1.0 installer (backed by <a %s>NW.js<\/a>), <a %s>click here to download<\/a>.","Mac users on 10.9 or lower, <a %s>download here<\/a>.":"Mac users on 10.9 or lower, <a %s>download here<\/a>.","We also have a sweet little <a %s>IRC bridge<\/a>.":"We also have a sweet little <a %s>IRC bridge<\/a>.","The dedicated Android/iOS apps are no longer recommended and may be officially <a href='%s'>deprecated in the future<\/a>. For mobile, we recommend using the mobile web version in your browser.":"The dedicated Android/iOS apps are no longer recommended and may be officially <a href='%s'>deprecated in the future<\/a>. For mobile, we recommend using the mobile web version in your browser.","Our efforts are focused on the <a %s>webapp<\/a> which is the backbone of the mobile/desktop apps but mainly focused on the web experience. There are a number of bugs in these desktop/mobile clients and they spread the Gitter team too thin for us to give them proper attention. The apps are open-source if you want to tackle something particularly annoying to you.":"Our efforts are focused on the <a %s>webapp<\/a> which is the backbone of the mobile/desktop apps but mainly focused on the web experience. There are a number of bugs in these desktop/mobile clients and they spread the Gitter team too thin for us to give them proper attention. The apps are open-source if you want to tackle something particularly annoying to you.","desktop":"desktop","iOS":"iOS","Android":"Android","Support":"Support","API":"API","Blog":"Blog","Twitter":"Twitter"},"roomMember":false,"user":null,"troupe":{"id":"5609cf450fc9f982beb2225c","name":"alerta/chat","topic":"Alerta web next gen https://beta.alerta.io","avatarUrl":"https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b","uri":"alerta/chat","userCount":378,"url":"/alerta/chat","githubType":"ORG_CHANNEL","associatedRepo":false,"security":"PUBLIC","providers":["github"],"groupId":"57542c98c43b8c6019774b6b","group":{"id":"57542c98c43b8c6019774b6b","name":"alerta","uri":"alerta","homeUri":"alerta/home","backedBy":{"type":"GH_ORG","linkPath":"alerta"},"avatarUrl":"https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b"},"backend":{"type":"GH_ORG","linkPath":"alerta"},"public":true,"v":3},"roomHasWelcomeMessage":false,"archive":{"archiveDate":"2017-08-11T00:00:00.000Z","nextDate":"2017-08-12T23:59:59.999Z","previousDate":"2017-08-10T00:00:00.000Z","messages":[{"id":"598d6dc776a757f80894533a","text":"@satterly I want to run some plugins on status change. The first plugin adds some attributes to the alert and based on the result of those attribute values the second plugin should be executed. Right now it seems that the alert attribute isn't updated with the changed attributes. Do I need to call the db function to get updated attributes or is there another way?","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> I want to run some plugins on status change. The first plugin adds some attributes to the alert and based on the result of those attribute values the second plugin should be executed. Right now it seems that the alert attribute isn&#39;t updated with the changed attributes. Do I need to call the db function to get updated attributes or is there another way?","sent":"2017-08-11T08:41:43.167Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":6,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d7bf051915d962af7b64f","text":"yes. there’s an example in the origin PR description https://github.com/guardian/alerta/pull/213 ","html":"yes. there’s an example in the origin PR description <span data-link-type=\"issue\" data-issue=\"213\" data-issue-repo=\"guardian/alerta\" class=\"issue\">guardian/alerta#213<\/span> ","sent":"2017-08-11T09:42:08.622Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[{"repo":"guardian/alerta","number":"213"}],"meta":[],"v":1,"burstStart":true},{"id":"598d7c0351915d962af7b652","text":"I shoud add this to  the plugin documentation","html":"I shoud add this to  the plugin documentation","sent":"2017-08-11T09:42:27.543Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d7c6742d2f6102588e6bc","text":"the prometheus plugin is a better example https://github.com/alerta/alerta-contrib/blob/master/plugins/prometheus/alerta_prometheus.py","html":"the prometheus plugin is a better example <a href=\"https://github.com/alerta/alerta-contrib/blob/master/plugins/prometheus/alerta_prometheus.py\" rel=\"nofollow noopener noreferrer\" target=\"_blank\" class=\"link\">https://github.com/alerta/alerta-contrib/blob/master/plugins/prometheus/alerta_prometheus.py<\/a>","sent":"2017-08-11T09:44:07.817Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[{"url":"https://github.com/alerta/alerta-contrib/blob/master/plugins/prometheus/alerta_prometheus.py"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d7cc0ee5c9a4c5fae5bda","text":"Hi, I think you misunderstood. Plugin 1 is setting the attribute, this works great.\nThe problem is that when plugin 2 is running the attribute added by plugin 1 is missing in the alert body. Basically what I am after is that the plugins can share information by adding it as attributes.","html":"Hi, I think you misunderstood. Plugin 1 is setting the attribute, this works great.<br>The problem is that when plugin 2 is running the attribute added by plugin 1 is missing in the alert body. Basically what I am after is that the plugins can share information by adding it as attributes.","sent":"2017-08-11T09:45:36.295Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d7ce642d2f6102588e6c1","text":"ok. are you sure they are running in the order you expect?","html":"ok. are you sure they are running in the order you expect?","sent":"2017-08-11T09:46:14.803Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d7cfb51915d962af7b667","text":"they should run in the order listed in the PLUGINS setting. if not, that’s a bug.","html":"they should run in the order listed in the PLUGINS setting. if not, that’s a bug.","sent":"2017-08-11T09:46:35.243Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d7d5c0cef4fed2eb8fb82","text":"are you running `db.update_attributes()` in the first plugin? ","html":"are you running <code>db.update_attributes()<\/code> in the first plugin? ","sent":"2017-08-11T09:48:12.444Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d7dc176a757f808948f80","text":"It seems like they are running in the right order. My workflow is that the first plugin creates an JIRA issue and adds the attribute JiraKey. The next plugin is OP5 that is acknowledging the alert and adds the JiraKey to the server event log and acknowledges the problem.\n","html":"It seems like they are running in the right order. My workflow is that the first plugin creates an JIRA issue and adds the attribute JiraKey. The next plugin is OP5 that is acknowledging the alert and adds the JiraKey to the server event log and acknowledges the problem.","sent":"2017-08-11T09:49:53.051Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d7df72723db8d5e944e53","text":"When I print to console I am missing the added attribute in the output of the second plugin.","html":"When I print to console I am missing the added attribute in the output of the second plugin.","sent":"2017-08-11T09:50:47.480Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d7e1880d90ca024eb92e0","text":"Yes, I am using db.update_attributes()","html":"Yes, I am using db.update_attributes()","sent":"2017-08-11T09:51:20.838Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d87e797cedeb04827c1e0","text":"can you share the plugins with me online? have you checked them into GitHub or can you put them on pastebin or the like?","html":"can you share the plugins with me online? have you checked them into GitHub or can you put them on pastebin or the like?","sent":"2017-08-11T10:33:11.504Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":6,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d8828162adb6d2ee6c4fb","text":"Sure, but not at my computer right now. Maybe the best thing is to run db.get_alert() in the second plugin to make sure it have the most recent data. ","html":"Sure, but not at my computer right now. Maybe the best thing is to run db.get_alert() in the second plugin to make sure it have the most recent data. ","sent":"2017-08-11T10:34:16.063Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d89191c8697534aaa71ab","text":"To me it looks like the problem is here: https://github.com/guardian/alerta/blob/master/alerta/app/utils.py#L273","html":"To me it looks like the problem is here: <a href=\"https://github.com/guardian/alerta/blob/master/alerta/app/utils.py#L273\" rel=\"nofollow noopener noreferrer\" target=\"_blank\" class=\"link\">https://github.com/guardian/alerta/blob/master/alerta/app/utils.py#L273<\/a>","sent":"2017-08-11T10:38:17.981Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":7,"urls":[{"url":"https://github.com/guardian/alerta/blob/master/alerta/app/utils.py#L273"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d891dbc4647297472d285","text":"All plugins are executed with the same alert","html":"All plugins are executed with the same alert","sent":"2017-08-11T10:38:21.469Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d892f614889d4753ac9be","text":"Isn't an reload of alert needed?","html":"Isn&#39;t an reload of alert needed?","sent":"2017-08-11T10:38:39.902Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d91f60cef4fed2eb8fcc9","text":"Hmmm. i think you’re right. that could result in a lot of unnecessary db calls though.","html":"Hmmm. i think you’re right. that could result in a lot of unnecessary db calls though.","sent":"2017-08-11T11:16:06.358Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d927251915d962af7b74e","text":"i might have to think about this a bit more.","html":"i might have to think about this a bit more.","sent":"2017-08-11T11:18:10.283Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598d927d80d90ca024ebe14e","text":"Yes, but then I will add it to plugin nr 2. Or write an new plugin that communicates with both services.","html":"Yes, but then I will add it to plugin nr 2. Or write an new plugin that communicates with both services.","sent":"2017-08-11T11:18:21.560Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598d92d742d2f6102588e7cc","text":"I see. yes. calling db.get_alert() in plugin nr 2 could/should work.","html":"I see. yes. calling db.get_alert() in plugin nr 2 could/should work.","sent":"2017-08-11T11:19:51.710Z","editedAt":"2017-08-11T11:20:05.809Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":7,"urls":[],"mentions":[],"issues":[],"meta":[],"v":2,"burstStart":true},{"id":"598e251b210ac26920757b14","text":"Thanks it works, this is the server log in OP5:","html":"Thanks it works, this is the server log in OP5:","sent":"2017-08-11T21:43:55.979Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":5,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"598e2524a7b406262d7d8980","text":"[![image.png](https://files.gitter.im/alerta/chat/g8QI/thumb/image.png)](https://files.gitter.im/alerta/chat/g8QI/image.png)","html":"<a href=\"https://files.gitter.im/alerta/chat/g8QI/image.png\" rel=\"nofollow noopener noreferrer\" target=\"_blank\" class=\"link\"><img src=\"https://files.gitter.im/alerta/chat/g8QI/thumb/image.png\" alt=\"image.png\" rel=\"nofollow\"><\/a>","sent":"2017-08-11T21:44:04.101Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":5,"urls":[{"url":"https://files.gitter.im/alerta/chat/g8QI/thumb/image.png"},{"url":"https://files.gitter.im/alerta/chat/g8QI/image.png"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598e2553210ac26920757be8","text":"This is in my second plugin right after if status == \"ack\":","html":"This is in my second plugin right after if status == &quot;ack&quot;:","sent":"2017-08-11T21:44:51.917Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":5,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598e2555c101bc4e3a0cd523","text":"try:\n                db_alert = json.loads(str(db.get_alert(id=alert.id)))\n                text = \"Jira Issue: \" +  db_alert['attributes']['JiraKey']\n            except: pass","html":"try:<br>                db_alert = json.loads(str(db.get_alert(id=alert.id)))<br>                text = &quot;Jira Issue: &quot; +  db_alert[&#39;attributes&#39;][&#39;JiraKey&#39;]<br>            except: pass","sent":"2017-08-11T21:44:53.257Z","fromUser":{"id":"5609b0b20fc9f982beb21fdb","username":"tester22","displayName":"Anton","url":"/tester22","avatarUrl":"https://avatars-02.gitter.im/gh/uv/4/tester22","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/289504?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/289504?v=4&s=128","v":21,"gv":"4"},"readBy":5,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"598e26acee5c9a4c5fb11192","text":"Nice one. Good work. ","html":"Nice one. Good work. ","sent":"2017-08-11T21:50:36.689Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":5,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true}]}};</script>

    
    <script type="text/javascript">window.webpackPublicPath = '//cdn02.gitter.im/_s/0d31b2aef/js/';</script>
    <script type="text/javascript" src="//cdn01.gitter.im/_s/0d31b2aef/js/runtime.bundle.js"></script>
<script type="text/javascript" src="//cdn03.gitter.im/_s/0d31b2aef/js/vendor.chunk.js"></script>
<script type="text/javascript" src="//cdn02.gitter.im/_s/0d31b2aef/js/default.chunk.js"></script>
<script type="text/javascript" src="//cdn03.gitter.im/_s/0d31b2aef/js/router-archive-chat.chunk.js"></script>
  
</body>
</html>
