<!doctype html>
<html class="no-js " lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=IE9" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
  <meta charset="utf-8">

    <style>
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: bold;
      src: local("SourceSansPro-Bold");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: italic;
      font-weight: bold;
      src: local("SourceSansPro-BoldIt");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 200;
      src: local("SourceSansPro-ExtraLight");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: italic;
      font-weight: normal;
      src: local("SourceSansPro-It");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 300;
      src: local("SourceSansPro-Light");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: normal;
      src: local("SourceSansPro-Regular");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 600;
      src: local("SourceSansPro-Semibold");
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Regular.otf.woff") format('woff');
      font-weight: normal;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-It.otf.woff") format('woff');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Bold.otf.woff") format('woff');
      font-weight: bold;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Semibold.otf.woff") format('woff');
      font-weight: 600;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-BoldIt.otf.woff") format('woff');
      font-weight: bold;
      font-style: italic
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Light.otf.woff") format('woff');
      font-weight: 300;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-ExtraLight.otf.woff") format('woff');
      font-weight: 200;
      font-style: normal
    }
    @font-face {
      font-family: "KaTeX_AMS";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_AMS-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_AMS-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Caligraphic";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Caligraphic";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Regular.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Fraktur";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Fraktur";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Bold.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-BoldItalic.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-BoldItalic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Italic.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Regular.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Math";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-BoldItalic.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-BoldItalic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Math";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-Italic.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Italic.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Script";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Script-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Script-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size1";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size1-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size1-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size2";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size2-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size2-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size3";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size3-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size3-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size4";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size4-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size4-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Typewriter";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Typewriter-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Typewriter-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
  </style>

  <title>alerta/chat - Gitter</title>

  <style>

  @-webkit-keyframes pulsey {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
  }

  html.loading .trpContentPanel { background: url("//cdn01.gitter.im/_s/0d31b2aef/images/logo-mark-grey-64.png") center no-repeat; height: 90%; -webkit-animation: pulsey 2s ease-out; -webkit-animation-iteration-count: infinite;  }
  html.loading .trpContentPanel > * { visibility: hidden; }
  </style>
  <base target="_parent">
  <link rel="stylesheet" href='//cdn01.gitter.im/_s/0d31b2aef/sprites/services.css'>
  <link rel="stylesheet" href='//cdn02.gitter.im/_s/0d31b2aef/styles/router-archive-chat.css'>
  <link id="favicon" rel="shortcut icon" href="//cdn02.gitter.im/_s/0d31b2aef/images/favicon.ico">
</head>
<body class="logged-out">
  <div class="chat-and-toolbar-wrapper archive">
    <div class="right-toolbar-region">
      <div class="right-toolbar" style="overflow: auto">
        <div class="gtrArchiveToolbarWrapper">
            <div class="gtrArchiveInfoContainer">
                <div class="gtrArchiveLogo">
                  <div class="logo-container"></div>
                </div>
                <div class="gtrArchiveInfo">
                  <p>These are chat archives for <strong>alerta/chat</strong></p>
                </div>
            </div>

          <div id="archive-navigation" class="gtrArchiveNavigationWrapper"><div class="gtrArchiveNavigationInner">
  <div class="gtrArchiveDate">
    <a href="/alerta/chat/archives/2019/07/16"><i class="gtrArchiveNext octicon octicon-chevron-right"></i></a>
    <a href="/alerta/chat/archives/2019/07/14"><i class="gtrArchivePrev octicon octicon-chevron-left"></i></a>
    <div class="gtrArchiveToday">
      <span class="gtrArchiveDay">15<sup>th</sup></span><br>
      <span class="gtrArchiveMonth">Jul 2019</span>
    </div>
  </div>

  <div class="archive-toggle-navigation-action-holder">
    <button class="button-jaffa--small js-toggle-archive-navigation">Toggle Heatmap</button>
  </div>
  <div id="archive-navigation" class="gtrArchiveCalendar js-archive-navigation-wrapper">
  </div>
</div>
</div>
            <div class="archive-right-toolbar-button-wrapper">
              <a href="/login?action=login&amp;button=archive-login" class="archive-right-toolbar-button button-caribbean">Sign in to start talking</a>
            </div>
        </div>
      </div>
    </div>
    <div class="chat-app">
      <div class="chat-header" id="header-wrapper">
        <div id="header" class="chat-header-inner">
          <div class="chat-header__main-grouping chat-header__left-menu-toggle-grouping">
  <button class="chat-header__left-menu-toggle js-header-view-left-menu-toggle">
    <svg class="chat-header__action-icon" viewBox="0 0 26 22">
      <path d="M0,2 l26,0" />
      <path d="M0,11 l26,0" />
      <path d="M0,20 l26,0" />
    </svg>
  </button>
</div>

<div class="chat-header__main-grouping chat-header__avatar-grouping">
  <form
    class="chat-header__avatar  js-chat-header-group-avatar-upload-form"
    action=""
    enctype="multipart/form-data"
    method="POST">
    <input type="hidden" class="js-chat-header-group-avatar-upload-signature" name="signature" value="">
    <input type="hidden" class="js-chat-header-group-avatar-upload-params" name="params" value="">
    <input
      id="chat-header-group-avatar-upload-input"
      class="chat-header__group-avatar-upload-input js-chat-header-group-avatar-upload-input"
      name="file"
      type="file"
      accept="image/*"
      disabled />
    <label
      class="chat-header__group-avatar-upload-label js-chat-header-group-avatar-upload-label"
      for="chat-header-group-avatar-upload-input"
      >
      <img class="js-chat-header-avatar-image"  height='48' width='48' src='https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b?s=48' srcset='https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b?s=96 2x' >
      <div class="chat-header__group-avatar-upload-progress hidden js-chat-header-group-avatar-upload-progress"></div>
    </label>
  </form>
</div>

<div class="chat-header__main-grouping chat-header__info-grouping">
  <div class="chat-header__heading-sub-group">
    <h1 class="js-chat-name chat-header__heading">
      <a href="/alerta/chat" class="chat-header__title">alerta/chat</a>
    </h1>
  </div>
  <div class="chat-header__topic-sub-group js-room-topic-edit-activator" tabindex="0">
    <div class="chat-header__topic-wrapper js-room-topic-wrapper  "><p class="js-room-topic chat-header__topic  ">Alerta web next gen https://beta.alerta.io</p></div>
  </div>
</div>


<div class="chat-header__main-grouping chat-header__action-grouping">
    <a href="/orgs/alerta/rooms" class="chat-header__org-page org-page-link js-chat-header-org-page-action" title="More alerta rooms">
      <i class="chat-header__action-icon icon-globe"></i>
    </a>

</div>

        </div>
      </div>
      <div class="trpContentPanel archive" id="content-wrapper">
  <div class="trpChatPanel">
    <div class="trpChatContainer  primary-scroll  chat-container" id="content-frame">

      <div id="chat-container" role="list">
        <div>
            <div class="chat-item model-id-5d2bf882570ac36f8d274dc9 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d28eb35d73408ce4fc5eee7 avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/32713607?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/32713607?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Yu6936</div>
      <div class='chat-item__username js-chat-item-from'>@Yu6936</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2bf882570ac36f8d274dc9' title="">Jul 15 2019 03:52 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Curl to the  http:IP gets me to the default Nginx webpage which means Ngnix web server is working but curling to the http:ip/api gets the error.   I am unclear as to where to look. Do you mean to look at the Alerta/Uwsgi configuration?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c196a570ac36f8d2827b2 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c196a570ac36f8d2827b2' title="">Jul 15 2019 06:12 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="Yu6936" class="mention">@Yu6936</span> The error from /api Will be different from the error reported by the client. What&#39;s the exact output you get when you curl?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c2aea3b41924785c09fd7 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c2aea3b41924785c09fd7' title="">Jul 15 2019 07:27 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p><span data-link-type="mention" data-screen-name="moix" class="mention">@moix</span> <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Hi again, sorry for a late reply, only working on this when I&#39;m at work .<br>We got it working with </p><pre><code>CN=%s,DN=thedomain,DN=<span class="keyword">internal</span></code></pre><p>The issue is that CN is a full name parameter, and we want username, which in our directory is sAMAccountName.<br>Anyone knows how to use sAMAccountName in this basic_ldap.py setup? </p>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c2bb4202bb93f00a72605 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      I&#39;m not that experienced with Python and LDAP setups in that language. But in PHP this would be done very simply with this code:<pre><code><span class="variable">$ldap_host</span>       = <span class="string">"theserver.omaccess.net"</span>;
<span class="variable">$domain</span>          = <span class="string">"thedomain.local"</span>;

<span class="variable">$ldap_link</span> = ldap_connect(<span class="variable">$ldap_host</span>);
<span class="keyword">if</span> (<span class="variable">$ldap_link</span>){
    ldap_<span class="built_in">set</span>_option(<span class="variable">$ldap_link</span>, LDAP_OPT_PROTOCOL_VERSION, <span class="number">3</span>);
    ldap_<span class="built_in">set</span>_option(<span class="variable">$ldap_link</span>, LDAP_OPT_REFERRALS, <span class="number">0</span>);
} <span class="keyword">else</span> {
    trigger_error(<span class="string">"Unable to connect to LDAP host."</span>, E_USER_ERROR);
}

<span class="keyword">if</span> (ldap_<span class="built_in">bind</span>(<span class="variable">$ldap_link</span>, <span class="string">"{<span class="variable">$username</span>}@{<span class="variable">$domain</span>}"</span>, <span class="variable">$password</span>)){
    // Success
}</code></pre>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c3d5d3e2c7e39708a5a78 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c3d5d3e2c7e39708a5a78' title="">Jul 15 2019 08:46 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p>Actually got it working with the following:</p><pre><code>LDAP_DOMAINS = {
    <span class="string">'thedomain.com'</span>: <span class="string">'%s@thedomain.local'</span>
}</code></pre><p>But now it sets email to<br><a href="mailto:username@thedomain.com" rel="nofollow">username@thedomain.com</a><br>Which is not correct, should be<br><a href="mailto:First.Last@thedomain.com" rel="nofollow">First.Last@thedomain.com</a><br>Which can be fetched from LDAP, but how to do that?</p>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c58823b41924785c1ee56 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c58823b41924785c1ee56' title="">Jul 15 2019 10:42 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      When email lookup for LDAP was added we weren&#39;t sure if there was a standard way to retrieve the email address. If you know of one let us know
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c59043596f56f8ce0adce burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      See <a href="https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54" rel="nofollow noopener noreferrer" target="_blank" class="link">https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54</a>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c5be14f7f9e219cf90861 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c5be14f7f9e219cf90861' title="">Jul 15 2019 10:56 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      To be honest the email address isn&#39;t used for anything for external auth providers like LDAP. It&#39;s useful for password recovery when using internally provided basic auth but for LDAP auth users should use standard IT processes for user management
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c5fe03e2c7e39708b55da burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c5fe03e2c7e39708b55da' title="">Jul 15 2019 11:13 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Yes but we will send emails using the user database of Alerta is what we plan :)<br>I&#39;ve modified basic_ldap.py to our needs I think, how do I build a new container with this one? 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c5feb202bb93f00a8a90c burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      like a layer I guess but where to place the file
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c7d7ee190903936ecaff7 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c7d7ee190903936ecaff7' title="">Jul 15 2019 13:19 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      If you share the code we might be able to make it a config option.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c8bda202bb93f00a9f700 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c8bda202bb93f00a9f700' title="">Jul 15 2019 14:21 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      I&#39;m working on actually getting it to work. getting some strange errors when creating the user from the search email. <pre><code>web_1  | Traceback (most recent <span class="operator"><span class="keyword">call</span> <span class="keyword">last</span>):
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/flask/app.py"</span>, line <span class="number">1813</span>, <span class="keyword">in</span> full_dispatch_request
web_1  |     rv = <span class="keyword">self</span>.dispatch_request()
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/flask/app.py"</span>, line <span class="number">1799</span>, <span class="keyword">in</span> dispatch_request
web_1  |     <span class="keyword">return</span> <span class="keyword">self</span>.view_functions[rule.endpoint](**req.view_args)
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/flask_cors/decorator.py"</span>, line <span class="number">128</span>, <span class="keyword">in</span> wrapped_function
web_1  |     resp = make_response(<span class="keyword">f</span>(*args, **kwargs))
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/alerta/auth/basic_ldap.py"</span>, line <span class="number">101</span>, <span class="keyword">in</span> login
web_1  |     customers = get_customers(login=login, <span class="keyword">groups</span>=[<span class="keyword">user</span>.<span class="keyword">domain</span>] + <span class="keyword">groups</span>)
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/alerta/models/user.py"</span>, line <span class="number">46</span>, <span class="keyword">in</span> <span class="keyword">domain</span>
web_1  |     <span class="keyword">return</span> <span class="keyword">self</span>.email.<span class="keyword">split</span>(<span class="string">'@'</span>)[<span class="number">1</span>]
web_1  | TypeError: a <span class="keyword">bytes</span>-<span class="keyword">like</span> <span class="keyword">object</span> <span class="keyword">is</span> <span class="keyword">required</span>, <span class="keyword">not</span> <span class="string">'str'</span></span></code></pre>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c945e4d750532414d98d1 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c945e4d750532414d98d1' title="">Jul 15 2019 14:57 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p>This is now what I have done and this is working for my organizations setup with a big Active Directory of several thousand accounts actually. </p><pre><code>    <span class="keyword">try</span>:
        trace_level = <span class="number">2</span>
        ldap_connection = ldap.initialize(current_app.config[<span class="string">'LDAP_URL'</span>], trace_level=trace_level)
        ldap_connection.protocol_version = <span class="number">3</span>
        ldap_connection.set_option(ldap.OPT_REFERRALS, <span class="number">0</span>)
        ldap_connection.bind_s(userdn, password)
    <span class="keyword">except</span> ldap.INVALID_CREDENTIALS:
        <span class="keyword">raise</span> ApiError(<span class="string">'invalid username or password'</span>, <span class="number">401</span>)
    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
        <span class="keyword">raise</span> ApiError(str(e), <span class="number">500</span>)


    emaildn = current_app.config[<span class="string">'LDAP_DOMAINS_SEARCH_DN'</span>][domain]
    emailfilter = current_app.config[<span class="string">'LDAP_DOMAINS_SEARCH_FILTER'</span>][domain] % username

    <span class="comment"># Get email address from LDAP</span>
    <span class="keyword">if</span> <span class="keyword">not</span> email_verified:
        <span class="keyword">try</span>:
            print(<span class="string">'Running email'</span>)
            emailattr = [<span class="string">'mail'</span>]
            ldap_result = ldap_connection.search_s(emaildn, ldap.SCOPE_SUBTREE, emailfilter, emailattr)
            email = ldap_result[<span class="number">0</span>][<span class="number">1</span>][<span class="string">'mail'</span>][<span class="number">0</span>].decode(sys.stdout.encoding)
            email_verified = <span class="keyword">True</span>
        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
            <span class="keyword">raise</span> ApiError(str(e), <span class="number">500</span>)</code></pre><p>And in the conf</p><pre><code><span class="type">LDAP_DOMAINS</span> = {
    <span class="symbol">'host</span>.com': <span class="char">'%s@host.local'</span>
}

<span class="type">LDAP_DOMAINS_SEARCH_DN</span> = {
    <span class="symbol">'host</span>.com': <span class="symbol">'DC</span>=host,<span class="type">DC</span>=local'
}

<span class="type">LDAP_DOMAINS_SEARCH_FILTER</span> = {
    <span class="symbol">'host</span>.com': <span class="char">'(sAMAccountName=%s)'</span>
}</code></pre>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c99753596f56f8ce2a36d burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c99753596f56f8ce2a36d' title="">Jul 15 2019 15:19 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      The only thing I will need to change now is to not search for e-mail every time. Only the first time. 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c9b173b41924785c406aa burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-55512b0615522ed4b3e03e5b avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Stephane</div>
      <div class='chat-item__username js-chat-item-from'>@steevivo</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c9b173b41924785c406aa' title="">Jul 15 2019 15:26 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Hi Nick could you tell what‚Äôs  Alerta Release 7.0  different than beta.alerta.io features ? and the first release for  beta.alerta.io? In fact I have a big project with monitoring zabbix/prometheus, so can I use beta.alerta.io with minimal risk ? 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c9b743e2c7e39708d3b5f burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> and help you so with the debug and more üòÅ
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c9b9c4d750532414dd0c6 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c9b9c4d750532414dd0c6' title="">Jul 15 2019 15:28 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p>I moved all the email search stuff in to the</p><pre><code><span class="keyword">if</span> <span class="keyword">not</span> user:</code></pre><p>part so now it works like I want it to :)<br>Maybe you got some ideas how to give options for LDAP Auth :) </p>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cb4d33596f56f8ce3882c burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cb4d33596f56f8ce3882c' title="">Jul 15 2019 17:16 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="steevivo" class="mention">@steevivo</span> releases for the web UI and API are now done together. ie. both repos are tagged at the same time with version numbers that are compatible. The beta website is always master. ie. whenever there is a merge to master it is updated.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cb51b7dbfff3242b2b043 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      You can use the latest version with minimal risk.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cc35b570ac36f8d2d3902 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cc35b570ac36f8d2d3902' title="">Jul 15 2019 18:18 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="cisco92" class="mention">@cisco92</span> can you post a diff or PR somewhere so I can take a look. It&#39;s difficult to imagine what the code might look like from the above
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cddba4f7f9e219cfd1634 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-55512b0615522ed4b3e03e5b avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Stephane</div>
      <div class='chat-item__username js-chat-item-from'>@steevivo</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cddba4f7f9e219cfd1634' title="">Jul 15 2019 20:10 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Thanks a lot 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cfc685fa7895c4309d413 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-55512b0615522ed4b3e03e5b avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Stephane</div>
      <div class='chat-item__username js-chat-item-from'>@steevivo</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cfc685fa7895c4309d413' title="">Jul 15 2019 22:21 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Hi Nick some strange trouble with Alerta when I type python &gt; Python 3.6.8, but when I launch  alerted run i have the message : ImportError: You are running Alerta 6.0 on Python 2
    </div>
  </div>
</div>
</div>
        </div>
      </div>

      <div id='initial' style="height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>
    </div>
  </div>
</div>

    </div>
  </div>

    <script type="text/javascript">window.gitterClientEnv = {"lang":"en","domain":"gitter.im","baseServer":"gitter.im","basePath":"https://gitter.im","apiBasePath":"https://gitter.im/api","homeUrl":"/","badgeBaseUrl":"https://badges.gitter.im","googleTrackingId":"UA-45918290-1","googleTrackingDomain":"gitter.im","env":"prod","cdns":["cdn01.gitter.im","cdn02.gitter.im","cdn03.gitter.im"],"version":"0d31b2","assetTag":"0d31b2aef","logging":false,"ravenUrl":"https://a1bf037f1d5f46f28b8e3b3e82024654@sentry.gitlab.net/42","websockets":{"fayeUrl":"https://ws.gitter.im/bayeux","options":{"timeout":120,"retry":2}},"avatarsUrl":"https://avatars.gitter.im","avatarCdns":["https://avatars-01.gitter.im","https://avatars-02.gitter.im","https://avatars-03.gitter.im","https://avatars-04.gitter.im","https://avatars-05.gitter.im"],"vapidAppServerKey":"BMhrlZd_I5OFJSJQTbg2mZ5PTHarzenwsKfsRd8C0-HRBygpDj9O3M4VTJIQfB9VPDjAoO_w2eg7Sj_cMXzuLwI","headlineNumbers":{"gitterUsers":"800K+","gitterRooms":"300K+","gitterGroups":"90K+","gitterCountries":"100+"},"inviteEmailAbuseThresholdPerDay":10};window.troupeContext = {"accessToken":"$kfIrHKI4Y2uMv7/W5ohznu9VUSooHzvgvAUKXXZDI6c=","isNativeDesktopApp":false,"locale":{"%d unread message":{"one":"%d unread message","other":"%d unread messages"},"Unread messages in %%s, %%s and one other":{"one":"Unread messages in %%s, %%s and one other","other":"Unread messages in %%s, %%s and %d others"},"Unread messages in %s":"Unread messages in %s","Unread messages in %s and %s":"Unread messages in %s and %s","Unread messages from %s":"Unread messages from %s","Unread messages from %s and %s":"Unread messages from %s and %s","Unread messages from %%s, %%s and one other":{"one":"Unread messages from %%s, %%s and one other","other":"Unread messages from %%s, %%s and %d others"},"Gitter is available in all modern browsers as well as apps for desktops.":"Gitter is available in all modern browsers as well as apps for desktops.","Mac":"Mac","Windows":"Windows","Linux 32":"Linux 32","Linux 64":"Linux 64","The above Mac installer is a signed version of 1.177 (backed by Safari). For an unsigned 4.1.0 installer (backed by <a %s>NW.js<\/a>), <a %s>click here to download<\/a>.":"The above Mac installer is a signed version of 1.177 (backed by Safari). For an unsigned 4.1.0 installer (backed by <a %s>NW.js<\/a>), <a %s>click here to download<\/a>.","Mac users on 10.9 or lower, <a %s>download here<\/a>.":"Mac users on 10.9 or lower, <a %s>download here<\/a>.","We also have a sweet little <a %s>IRC bridge<\/a>.":"We also have a sweet little <a %s>IRC bridge<\/a>.","The dedicated Android/iOS apps are no longer recommended and may be officially <a href='%s'>deprecated in the future<\/a>. For mobile, we recommend using the mobile web version in your browser.":"The dedicated Android/iOS apps are no longer recommended and may be officially <a href='%s'>deprecated in the future<\/a>. For mobile, we recommend using the mobile web version in your browser.","Our efforts are focused on the <a %s>webapp<\/a> which is the backbone of the mobile/desktop apps but mainly focused on the web experience. There are a number of bugs in these desktop/mobile clients and they spread the Gitter team too thin for us to give them proper attention. The apps are open-source if you want to tackle something particularly annoying to you.":"Our efforts are focused on the <a %s>webapp<\/a> which is the backbone of the mobile/desktop apps but mainly focused on the web experience. There are a number of bugs in these desktop/mobile clients and they spread the Gitter team too thin for us to give them proper attention. The apps are open-source if you want to tackle something particularly annoying to you.","desktop":"desktop","iOS":"iOS","Android":"Android","Support":"Support","API":"API","Blog":"Blog","Twitter":"Twitter"},"roomMember":false,"user":null,"troupe":{"id":"5609cf450fc9f982beb2225c","name":"alerta/chat","topic":"Alerta web next gen https://beta.alerta.io","avatarUrl":"https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b","uri":"alerta/chat","userCount":378,"url":"/alerta/chat","githubType":"ORG_CHANNEL","associatedRepo":false,"security":"PUBLIC","providers":["github"],"groupId":"57542c98c43b8c6019774b6b","group":{"id":"57542c98c43b8c6019774b6b","name":"alerta","uri":"alerta","homeUri":"alerta/home","backedBy":{"type":"GH_ORG","linkPath":"alerta"},"avatarUrl":"https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b"},"backend":{"type":"GH_ORG","linkPath":"alerta"},"public":true,"v":3},"roomHasWelcomeMessage":false,"archive":{"archiveDate":"2019-07-15T00:00:00.000Z","nextDate":"2019-07-16T23:59:59.999Z","previousDate":"2019-07-14T00:00:00.000Z","messages":[{"id":"5d2bf882570ac36f8d274dc9","text":"@satterly Curl to the  http:IP gets me to the default Nginx webpage which means Ngnix web server is working but curling to the http:ip/api gets the error.   I am unclear as to where to look. Do you mean to look at the Alerta/Uwsgi configuration?","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Curl to the  http:IP gets me to the default Nginx webpage which means Ngnix web server is working but curling to the http:ip/api gets the error.   I am unclear as to where to look. Do you mean to look at the Alerta/Uwsgi configuration?","sent":"2019-07-15T03:52:34.822Z","fromUser":{"id":"5d28eb35d73408ce4fc5eee7","username":"Yu6936","displayName":"Yu6936","url":"/Yu6936","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/Yu6936","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/32713607?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/32713607?v=4&s=128","v":3,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c196a570ac36f8d2827b2","text":"@Yu6936 The error from /api Will be different from the error reported by the client. What's the exact output you get when you curl?","html":"<span data-link-type=\"mention\" data-screen-name=\"Yu6936\" class=\"mention\">@Yu6936<\/span> The error from /api Will be different from the error reported by the client. What&#39;s the exact output you get when you curl?","sent":"2019-07-15T06:12:58.566Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":11,"urls":[],"mentions":[{"screenName":"Yu6936","userId":"5d28eb35d73408ce4fc5eee7","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c2aea3b41924785c09fd7","text":"@moix @satterly Hi again, sorry for a late reply, only working on this when I'm at work .\nWe got it working with \n```\nCN=%s,DN=thedomain,DN=internal\n```\nThe issue is that CN is a full name parameter, and we want username, which in our directory is sAMAccountName.\nAnyone knows how to use sAMAccountName in this basic_ldap.py setup? ","html":"<p><span data-link-type=\"mention\" data-screen-name=\"moix\" class=\"mention\">@moix<\/span> <span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Hi again, sorry for a late reply, only working on this when I&#39;m at work .<br>We got it working with <\/p><pre><code>CN=%s,DN=thedomain,DN=<span class=\"keyword\">internal<\/span><\/code><\/pre><p>The issue is that CN is a full name parameter, and we want username, which in our directory is sAMAccountName.<br>Anyone knows how to use sAMAccountName in this basic_ldap.py setup? <\/p>","sent":"2019-07-15T07:27:38.349Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":11,"urls":[],"mentions":[{"screenName":"moix","userId":"5d14be9bd73408ce4fc4a8a1","userIds":[]},{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c2bb4202bb93f00a72605","text":"I'm not that experienced with Python and LDAP setups in that language. But in PHP this would be done very simply with this code:\n```\n$ldap_host       = \"theserver.omaccess.net\";\n$domain          = \"thedomain.local\";\n\n$ldap_link = ldap_connect($ldap_host);\nif ($ldap_link){\n    ldap_set_option($ldap_link, LDAP_OPT_PROTOCOL_VERSION, 3);\n    ldap_set_option($ldap_link, LDAP_OPT_REFERRALS, 0);\n} else {\n    trigger_error(\"Unable to connect to LDAP host.\", E_USER_ERROR);\n}\n\nif (ldap_bind($ldap_link, \"{$username}@{$domain}\", $password)){\n    // Success\n}\n```","html":"I&#39;m not that experienced with Python and LDAP setups in that language. But in PHP this would be done very simply with this code:<pre><code><span class=\"variable\">$ldap_host<\/span>       = <span class=\"string\">\"theserver.omaccess.net\"<\/span>;\n<span class=\"variable\">$domain<\/span>          = <span class=\"string\">\"thedomain.local\"<\/span>;\n\n<span class=\"variable\">$ldap_link<\/span> = ldap_connect(<span class=\"variable\">$ldap_host<\/span>);\n<span class=\"keyword\">if<\/span> (<span class=\"variable\">$ldap_link<\/span>){\n    ldap_<span class=\"built_in\">set<\/span>_option(<span class=\"variable\">$ldap_link<\/span>, LDAP_OPT_PROTOCOL_VERSION, <span class=\"number\">3<\/span>);\n    ldap_<span class=\"built_in\">set<\/span>_option(<span class=\"variable\">$ldap_link<\/span>, LDAP_OPT_REFERRALS, <span class=\"number\">0<\/span>);\n} <span class=\"keyword\">else<\/span> {\n    trigger_error(<span class=\"string\">\"Unable to connect to LDAP host.\"<\/span>, E_USER_ERROR);\n}\n\n<span class=\"keyword\">if<\/span> (ldap_<span class=\"built_in\">bind<\/span>(<span class=\"variable\">$ldap_link<\/span>, <span class=\"string\">\"{<span class=\"variable\">$username<\/span>}@{<span class=\"variable\">$domain<\/span>}\"<\/span>, <span class=\"variable\">$password<\/span>)){\n    // Success\n}<\/code><\/pre>","sent":"2019-07-15T07:31:00.615Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":11,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c3d5d3e2c7e39708a5a78","text":"Actually got it working with the following:\n```\nLDAP_DOMAINS = {\n    'thedomain.com': '%s@thedomain.local'\n}\n```\nBut now it sets email to\nusername@thedomain.com\nWhich is not correct, should be \nFirst.Last@thedomain.com\nWhich can be fetched from LDAP, but how to do that?","html":"<p>Actually got it working with the following:<\/p><pre><code>LDAP_DOMAINS = {\n    <span class=\"string\">'thedomain.com'<\/span>: <span class=\"string\">'%s@thedomain.local'<\/span>\n}<\/code><\/pre><p>But now it sets email to<br><a href=\"mailto:username@thedomain.com\" rel=\"nofollow\">username@thedomain.com<\/a><br>Which is not correct, should be<br><a href=\"mailto:First.Last@thedomain.com\" rel=\"nofollow\">First.Last@thedomain.com<\/a><br>Which can be fetched from LDAP, but how to do that?<\/p>","sent":"2019-07-15T08:46:21.166Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[{"url":"mailto:username@thedomain.com"},{"url":"mailto:First.Last@thedomain.com"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c58823b41924785c1ee56","text":"When email lookup for LDAP was added we weren't sure if there was a standard way to retrieve the email address. If you know of one let us know","html":"When email lookup for LDAP was added we weren&#39;t sure if there was a standard way to retrieve the email address. If you know of one let us know","sent":"2019-07-15T10:42:10.211Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c59043596f56f8ce0adce","text":"See https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54","html":"See <a href=\"https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54\" rel=\"nofollow noopener noreferrer\" target=\"_blank\" class=\"link\">https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54<\/a>","sent":"2019-07-15T10:44:20.851Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[{"url":"https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c5be14f7f9e219cf90861","text":"To be honest the email address isn't used for anything for external auth providers like LDAP. It's useful for password recovery when using internally provided basic auth but for LDAP auth users should use standard IT processes for user management","html":"To be honest the email address isn&#39;t used for anything for external auth providers like LDAP. It&#39;s useful for password recovery when using internally provided basic auth but for LDAP auth users should use standard IT processes for user management","sent":"2019-07-15T10:56:33.967Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c5fe03e2c7e39708b55da","text":"Yes but we will send emails using the user database of Alerta is what we plan :) \nI've modified basic_ldap.py to our needs I think, how do I build a new container with this one? ","html":"Yes but we will send emails using the user database of Alerta is what we plan :)<br>I&#39;ve modified basic_ldap.py to our needs I think, how do I build a new container with this one? ","sent":"2019-07-15T11:13:36.525Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c5feb202bb93f00a8a90c","text":"like a layer I guess but where to place the file","html":"like a layer I guess but where to place the file","sent":"2019-07-15T11:13:47.025Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c7d7ee190903936ecaff7","text":"If you share the code we might be able to make it a config option.","html":"If you share the code we might be able to make it a config option.","sent":"2019-07-15T13:19:58.371Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c8bda202bb93f00a9f700","text":"I'm working on actually getting it to work. getting some strange errors when creating the user from the search email. \n```\nweb_1  | Traceback (most recent call last):\nweb_1  |   File \"/venv/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\nweb_1  |     rv = self.dispatch_request()\nweb_1  |   File \"/venv/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\nweb_1  |     return self.view_functions[rule.endpoint](**req.view_args)\nweb_1  |   File \"/venv/lib/python3.6/site-packages/flask_cors/decorator.py\", line 128, in wrapped_function\nweb_1  |     resp = make_response(f(*args, **kwargs))\nweb_1  |   File \"/venv/lib/python3.6/site-packages/alerta/auth/basic_ldap.py\", line 101, in login\nweb_1  |     customers = get_customers(login=login, groups=[user.domain] + groups)\nweb_1  |   File \"/venv/lib/python3.6/site-packages/alerta/models/user.py\", line 46, in domain\nweb_1  |     return self.email.split('@')[1]\nweb_1  | TypeError: a bytes-like object is required, not 'str'\n```","html":"I&#39;m working on actually getting it to work. getting some strange errors when creating the user from the search email. <pre><code>web_1  | Traceback (most recent <span class=\"operator\"><span class=\"keyword\">call<\/span> <span class=\"keyword\">last<\/span>):\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/flask/app.py\"<\/span>, line <span class=\"number\">1813<\/span>, <span class=\"keyword\">in<\/span> full_dispatch_request\nweb_1  |     rv = <span class=\"keyword\">self<\/span>.dispatch_request()\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/flask/app.py\"<\/span>, line <span class=\"number\">1799<\/span>, <span class=\"keyword\">in<\/span> dispatch_request\nweb_1  |     <span class=\"keyword\">return<\/span> <span class=\"keyword\">self<\/span>.view_functions[rule.endpoint](**req.view_args)\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/flask_cors/decorator.py\"<\/span>, line <span class=\"number\">128<\/span>, <span class=\"keyword\">in<\/span> wrapped_function\nweb_1  |     resp = make_response(<span class=\"keyword\">f<\/span>(*args, **kwargs))\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/alerta/auth/basic_ldap.py\"<\/span>, line <span class=\"number\">101<\/span>, <span class=\"keyword\">in<\/span> login\nweb_1  |     customers = get_customers(login=login, <span class=\"keyword\">groups<\/span>=[<span class=\"keyword\">user<\/span>.<span class=\"keyword\">domain<\/span>] + <span class=\"keyword\">groups<\/span>)\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/alerta/models/user.py\"<\/span>, line <span class=\"number\">46<\/span>, <span class=\"keyword\">in<\/span> <span class=\"keyword\">domain<\/span>\nweb_1  |     <span class=\"keyword\">return<\/span> <span class=\"keyword\">self<\/span>.email.<span class=\"keyword\">split<\/span>(<span class=\"string\">'@'<\/span>)[<span class=\"number\">1<\/span>]\nweb_1  | TypeError: a <span class=\"keyword\">bytes<\/span>-<span class=\"keyword\">like<\/span> <span class=\"keyword\">object<\/span> <span class=\"keyword\">is<\/span> <span class=\"keyword\">required<\/span>, <span class=\"keyword\">not<\/span> <span class=\"string\">'str'<\/span><\/span><\/code><\/pre>","sent":"2019-07-15T14:21:14.728Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c945e4d750532414d98d1","text":"This is now what I have done and this is working for my organizations setup with a big Active Directory of several thousand accounts actually. \n```\n    try:\n        trace_level = 2\n        ldap_connection = ldap.initialize(current_app.config['LDAP_URL'], trace_level=trace_level)\n        ldap_connection.protocol_version = 3\n        ldap_connection.set_option(ldap.OPT_REFERRALS, 0)\n        ldap_connection.bind_s(userdn, password)\n    except ldap.INVALID_CREDENTIALS:\n        raise ApiError('invalid username or password', 401)\n    except Exception as e:\n        raise ApiError(str(e), 500)\n\n\n    emaildn = current_app.config['LDAP_DOMAINS_SEARCH_DN'][domain]\n    emailfilter = current_app.config['LDAP_DOMAINS_SEARCH_FILTER'][domain] % username\n\n    # Get email address from LDAP\n    if not email_verified:\n        try:\n            print('Running email')\n            emailattr = ['mail']\n            ldap_result = ldap_connection.search_s(emaildn, ldap.SCOPE_SUBTREE, emailfilter, emailattr)\n            email = ldap_result[0][1]['mail'][0].decode(sys.stdout.encoding)\n            email_verified = True\n        except Exception as e:\n            raise ApiError(str(e), 500)\n```\nAnd in the conf\n```\nLDAP_DOMAINS = {\n    'host.com': '%s@host.local'\n}\n\nLDAP_DOMAINS_SEARCH_DN = {\n\t'host.com': 'DC=host,DC=local'\n}\n\nLDAP_DOMAINS_SEARCH_FILTER = {\n\t'host.com': '(sAMAccountName=%s)'\n}\n```","html":"<p>This is now what I have done and this is working for my organizations setup with a big Active Directory of several thousand accounts actually. <\/p><pre><code>    <span class=\"keyword\">try<\/span>:\n        trace_level = <span class=\"number\">2<\/span>\n        ldap_connection = ldap.initialize(current_app.config[<span class=\"string\">'LDAP_URL'<\/span>], trace_level=trace_level)\n        ldap_connection.protocol_version = <span class=\"number\">3<\/span>\n        ldap_connection.set_option(ldap.OPT_REFERRALS, <span class=\"number\">0<\/span>)\n        ldap_connection.bind_s(userdn, password)\n    <span class=\"keyword\">except<\/span> ldap.INVALID_CREDENTIALS:\n        <span class=\"keyword\">raise<\/span> ApiError(<span class=\"string\">'invalid username or password'<\/span>, <span class=\"number\">401<\/span>)\n    <span class=\"keyword\">except<\/span> Exception <span class=\"keyword\">as<\/span> e:\n        <span class=\"keyword\">raise<\/span> ApiError(str(e), <span class=\"number\">500<\/span>)\n\n\n    emaildn = current_app.config[<span class=\"string\">'LDAP_DOMAINS_SEARCH_DN'<\/span>][domain]\n    emailfilter = current_app.config[<span class=\"string\">'LDAP_DOMAINS_SEARCH_FILTER'<\/span>][domain] % username\n\n    <span class=\"comment\"># Get email address from LDAP<\/span>\n    <span class=\"keyword\">if<\/span> <span class=\"keyword\">not<\/span> email_verified:\n        <span class=\"keyword\">try<\/span>:\n            print(<span class=\"string\">'Running email'<\/span>)\n            emailattr = [<span class=\"string\">'mail'<\/span>]\n            ldap_result = ldap_connection.search_s(emaildn, ldap.SCOPE_SUBTREE, emailfilter, emailattr)\n            email = ldap_result[<span class=\"number\">0<\/span>][<span class=\"number\">1<\/span>][<span class=\"string\">'mail'<\/span>][<span class=\"number\">0<\/span>].decode(sys.stdout.encoding)\n            email_verified = <span class=\"keyword\">True<\/span>\n        <span class=\"keyword\">except<\/span> Exception <span class=\"keyword\">as<\/span> e:\n            <span class=\"keyword\">raise<\/span> ApiError(str(e), <span class=\"number\">500<\/span>)<\/code><\/pre><p>And in the conf<\/p><pre><code><span class=\"type\">LDAP_DOMAINS<\/span> = {\n    <span class=\"symbol\">'host<\/span>.com': <span class=\"char\">'%s@host.local'<\/span>\n}\n\n<span class=\"type\">LDAP_DOMAINS_SEARCH_DN<\/span> = {\n    <span class=\"symbol\">'host<\/span>.com': <span class=\"symbol\">'DC<\/span>=host,<span class=\"type\">DC<\/span>=local'\n}\n\n<span class=\"type\">LDAP_DOMAINS_SEARCH_FILTER<\/span> = {\n    <span class=\"symbol\">'host<\/span>.com': <span class=\"char\">'(sAMAccountName=%s)'<\/span>\n}<\/code><\/pre>","sent":"2019-07-15T14:57:34.681Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":11,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c99753596f56f8ce2a36d","text":"The only thing I will need to change now is to not search for e-mail every time. Only the first time. ","html":"The only thing I will need to change now is to not search for e-mail every time. Only the first time. ","sent":"2019-07-15T15:19:17.840Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":12,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c9b173b41924785c406aa","text":"@satterly Hi Nick could you tell what‚Äôs  Alerta Release 7.0  different than beta.alerta.io features ? and the first release for  beta.alerta.io? In fact I have a big project with monitoring zabbix/prometheus, so can I use beta.alerta.io with minimal risk ? ","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Hi Nick could you tell what‚Äôs  Alerta Release 7.0  different than beta.alerta.io features ? and the first release for  beta.alerta.io? In fact I have a big project with monitoring zabbix/prometheus, so can I use beta.alerta.io with minimal risk ? ","sent":"2019-07-15T15:26:15.499Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c9b743e2c7e39708d3b5f","text":"@satterly and help you so with the debug and more üòÅ","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> and help you so with the debug and more üòÅ","sent":"2019-07-15T15:27:48.433Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c9b9c4d750532414dd0c6","text":"I moved all the email search stuff in to the\n```\nif not user:\n```\npart so now it works like I want it to :) \nMaybe you got some ideas how to give options for LDAP Auth :) ","html":"<p>I moved all the email search stuff in to the<\/p><pre><code><span class=\"keyword\">if<\/span> <span class=\"keyword\">not<\/span> user:<\/code><\/pre><p>part so now it works like I want it to :)<br>Maybe you got some ideas how to give options for LDAP Auth :) <\/p>","sent":"2019-07-15T15:28:28.242Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":12,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cb4d33596f56f8ce3882c","text":"@steevivo releases for the web UI and API are now done together. ie. both repos are tagged at the same time with version numbers that are compatible. The beta website is always master. ie. whenever there is a merge to master it is updated.","html":"<span data-link-type=\"mention\" data-screen-name=\"steevivo\" class=\"mention\">@steevivo<\/span> releases for the web UI and API are now done together. ie. both repos are tagged at the same time with version numbers that are compatible. The beta website is always master. ie. whenever there is a merge to master it is updated.","sent":"2019-07-15T17:16:03.602Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"steevivo","userId":"55512b0615522ed4b3e03e5b","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cb51b7dbfff3242b2b043","text":"You can use the latest version with minimal risk.","html":"You can use the latest version with minimal risk.","sent":"2019-07-15T17:17:15.808Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":13,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2cc35b570ac36f8d2d3902","text":"@cisco92 can you post a diff or PR somewhere so I can take a look. It's difficult to imagine what the code might look like from the above","html":"<span data-link-type=\"mention\" data-screen-name=\"cisco92\" class=\"mention\">@cisco92<\/span> can you post a diff or PR somewhere so I can take a look. It&#39;s difficult to imagine what the code might look like from the above","sent":"2019-07-15T18:18:03.144Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":13,"urls":[],"mentions":[{"screenName":"cisco92","userId":"5d10d1edd73408ce4fc45d98","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cddba4f7f9e219cfd1634","text":"@satterly Thanks a lot ","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Thanks a lot ","sent":"2019-07-15T20:10:34.125Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":14,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cfc685fa7895c4309d413","text":"@satterly Hi Nick some strange trouble with Alerta when I type python > Python 3.6.8, but when I launch  alerted run i have the message : ImportError: You are running Alerta 6.0 on Python 2","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Hi Nick some strange trouble with Alerta when I type python &gt; Python 3.6.8, but when I launch  alerted run i have the message : ImportError: You are running Alerta 6.0 on Python 2","sent":"2019-07-15T22:21:28.745Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":13,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true}]}};</script>

    
    <script type="text/javascript">window.webpackPublicPath = '//cdn02.gitter.im/_s/0d31b2aef/js/';</script>
    <script type="text/javascript" src="//cdn01.gitter.im/_s/0d31b2aef/js/runtime.bundle.js"></script>
<script type="text/javascript" src="//cdn03.gitter.im/_s/0d31b2aef/js/vendor.chunk.js"></script>
<script type="text/javascript" src="//cdn02.gitter.im/_s/0d31b2aef/js/default.chunk.js"></script>
<script type="text/javascript" src="//cdn03.gitter.im/_s/0d31b2aef/js/router-archive-chat.chunk.js"></script>
  
</body>
</html>
<!doctype html>
<html class="no-js " lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=IE9" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"/>
  <meta charset="utf-8">

    <style>
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: bold;
      src: local("SourceSansPro-Bold");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: italic;
      font-weight: bold;
      src: local("SourceSansPro-BoldIt");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 200;
      src: local("SourceSansPro-ExtraLight");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: italic;
      font-weight: normal;
      src: local("SourceSansPro-It");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 300;
      src: local("SourceSansPro-Light");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: normal;
      src: local("SourceSansPro-Regular");
    }
    @font-face {
      font-family: 'SourceSansLocal';
      font-style: normal;
      font-weight: 600;
      src: local("SourceSansPro-Semibold");
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Regular.otf.woff") format('woff');
      font-weight: normal;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-It.otf.woff") format('woff');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Bold.otf.woff") format('woff');
      font-weight: bold;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Semibold.otf.woff") format('woff');
      font-weight: 600;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-BoldIt.otf.woff") format('woff');
      font-weight: bold;
      font-style: italic
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-Light.otf.woff") format('woff');
      font-weight: 300;
      font-style: normal
    }
    @font-face {
      font-family: "source-sans-pro";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/fonts/sourcesans/SourceSansPro-ExtraLight.otf.woff") format('woff');
      font-weight: 200;
      font-style: normal
    }
    @font-face {
      font-family: "KaTeX_AMS";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_AMS-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_AMS-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Caligraphic";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Caligraphic";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Regular.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Caligraphic-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Fraktur";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Fraktur";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Fraktur-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Bold.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-BoldItalic.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-BoldItalic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Italic.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Main";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Regular.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Main-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Math";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-BoldItalic.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-BoldItalic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Math";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-Italic.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Math-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Bold.woff") format('woff');
        src: url("//cdn01.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Bold.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Italic.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Italic.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_SansSerif";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_SansSerif-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Script";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Script-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Script-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size1";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size1-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size1-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size2";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size2-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size2-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size3";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size3-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size3-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Size4";
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size4-Regular.woff") format('woff');
        src: url("//cdn03.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Size4-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
    @font-face {
      font-family: "KaTeX_Typewriter";
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Typewriter-Regular.woff") format('woff');
        src: url("//cdn02.gitter.im/_s/0d31b2aef/repo/katex/fonts-0.10.0/KaTeX_Typewriter-Regular.woff2") format('woff2');
      font-weight: normal;
      font-style: italic
    }
  </style>

  <title>alerta/chat - Gitter</title>

  <style>

  @-webkit-keyframes pulsey {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
  }

  html.loading .trpContentPanel { background: url("//cdn01.gitter.im/_s/0d31b2aef/images/logo-mark-grey-64.png") center no-repeat; height: 90%; -webkit-animation: pulsey 2s ease-out; -webkit-animation-iteration-count: infinite;  }
  html.loading .trpContentPanel > * { visibility: hidden; }
  </style>
  <base target="_parent">
  <link rel="stylesheet" href='//cdn01.gitter.im/_s/0d31b2aef/sprites/services.css'>
  <link rel="stylesheet" href='//cdn02.gitter.im/_s/0d31b2aef/styles/router-archive-chat.css'>
  <link id="favicon" rel="shortcut icon" href="//cdn02.gitter.im/_s/0d31b2aef/images/favicon.ico">
</head>
<body class="logged-out">
  <div class="chat-and-toolbar-wrapper archive">
    <div class="right-toolbar-region">
      <div class="right-toolbar" style="overflow: auto">
        <div class="gtrArchiveToolbarWrapper">
            <div class="gtrArchiveInfoContainer">
                <div class="gtrArchiveLogo">
                  <div class="logo-container"></div>
                </div>
                <div class="gtrArchiveInfo">
                  <p>These are chat archives for <strong>alerta/chat</strong></p>
                </div>
            </div>

          <div id="archive-navigation" class="gtrArchiveNavigationWrapper"><div class="gtrArchiveNavigationInner">
  <div class="gtrArchiveDate">
    <a href="/alerta/chat/archives/2019/07/16"><i class="gtrArchiveNext octicon octicon-chevron-right"></i></a>
    <a href="/alerta/chat/archives/2019/07/14"><i class="gtrArchivePrev octicon octicon-chevron-left"></i></a>
    <div class="gtrArchiveToday">
      <span class="gtrArchiveDay">15<sup>th</sup></span><br>
      <span class="gtrArchiveMonth">Jul 2019</span>
    </div>
  </div>

  <div class="archive-toggle-navigation-action-holder">
    <button class="button-jaffa--small js-toggle-archive-navigation">Toggle Heatmap</button>
  </div>
  <div id="archive-navigation" class="gtrArchiveCalendar js-archive-navigation-wrapper">
  </div>
</div>
</div>
            <div class="archive-right-toolbar-button-wrapper">
              <a href="/login?action=login&amp;button=archive-login" class="archive-right-toolbar-button button-caribbean">Sign in to start talking</a>
            </div>
        </div>
      </div>
    </div>
    <div class="chat-app">
      <div class="chat-header" id="header-wrapper">
        <div id="header" class="chat-header-inner">
          <div class="chat-header__main-grouping chat-header__left-menu-toggle-grouping">
  <button class="chat-header__left-menu-toggle js-header-view-left-menu-toggle">
    <svg class="chat-header__action-icon" viewBox="0 0 26 22">
      <path d="M0,2 l26,0" />
      <path d="M0,11 l26,0" />
      <path d="M0,20 l26,0" />
    </svg>
  </button>
</div>

<div class="chat-header__main-grouping chat-header__avatar-grouping">
  <form
    class="chat-header__avatar  js-chat-header-group-avatar-upload-form"
    action=""
    enctype="multipart/form-data"
    method="POST">
    <input type="hidden" class="js-chat-header-group-avatar-upload-signature" name="signature" value="">
    <input type="hidden" class="js-chat-header-group-avatar-upload-params" name="params" value="">
    <input
      id="chat-header-group-avatar-upload-input"
      class="chat-header__group-avatar-upload-input js-chat-header-group-avatar-upload-input"
      name="file"
      type="file"
      accept="image/*"
      disabled />
    <label
      class="chat-header__group-avatar-upload-label js-chat-header-group-avatar-upload-label"
      for="chat-header-group-avatar-upload-input"
      >
      <img class="js-chat-header-avatar-image"  height='48' width='48' src='https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b?s=48' srcset='https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b?s=96 2x' >
      <div class="chat-header__group-avatar-upload-progress hidden js-chat-header-group-avatar-upload-progress"></div>
    </label>
  </form>
</div>

<div class="chat-header__main-grouping chat-header__info-grouping">
  <div class="chat-header__heading-sub-group">
    <h1 class="js-chat-name chat-header__heading">
      <a href="/alerta/chat" class="chat-header__title">alerta/chat</a>
    </h1>
  </div>
  <div class="chat-header__topic-sub-group js-room-topic-edit-activator" tabindex="0">
    <div class="chat-header__topic-wrapper js-room-topic-wrapper  "><p class="js-room-topic chat-header__topic  ">Alerta web next gen https://beta.alerta.io</p></div>
  </div>
</div>


<div class="chat-header__main-grouping chat-header__action-grouping">
    <a href="/orgs/alerta/rooms" class="chat-header__org-page org-page-link js-chat-header-org-page-action" title="More alerta rooms">
      <i class="chat-header__action-icon icon-globe"></i>
    </a>

</div>

        </div>
      </div>
      <div class="trpContentPanel archive" id="content-wrapper">
  <div class="trpChatPanel">
    <div class="trpChatContainer  primary-scroll  chat-container" id="content-frame">

      <div id="chat-container" role="list">
        <div>
            <div class="chat-item model-id-5d2bf882570ac36f8d274dc9 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d28eb35d73408ce4fc5eee7 avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/32713607?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/32713607?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Yu6936</div>
      <div class='chat-item__username js-chat-item-from'>@Yu6936</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2bf882570ac36f8d274dc9' title="">Jul 15 2019 03:52 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Curl to the  http:IP gets me to the default Nginx webpage which means Ngnix web server is working but curling to the http:ip/api gets the error.   I am unclear as to where to look. Do you mean to look at the Alerta/Uwsgi configuration?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c196a570ac36f8d2827b2 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c196a570ac36f8d2827b2' title="">Jul 15 2019 06:12 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="Yu6936" class="mention">@Yu6936</span> The error from /api Will be different from the error reported by the client. What&#39;s the exact output you get when you curl?
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c2aea3b41924785c09fd7 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c2aea3b41924785c09fd7' title="">Jul 15 2019 07:27 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p><span data-link-type="mention" data-screen-name="moix" class="mention">@moix</span> <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Hi again, sorry for a late reply, only working on this when I&#39;m at work .<br>We got it working with </p><pre><code>CN=%s,DN=thedomain,DN=<span class="keyword">internal</span></code></pre><p>The issue is that CN is a full name parameter, and we want username, which in our directory is sAMAccountName.<br>Anyone knows how to use sAMAccountName in this basic_ldap.py setup? </p>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c2bb4202bb93f00a72605 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      I&#39;m not that experienced with Python and LDAP setups in that language. But in PHP this would be done very simply with this code:<pre><code><span class="variable">$ldap_host</span>       = <span class="string">"theserver.omaccess.net"</span>;
<span class="variable">$domain</span>          = <span class="string">"thedomain.local"</span>;

<span class="variable">$ldap_link</span> = ldap_connect(<span class="variable">$ldap_host</span>);
<span class="keyword">if</span> (<span class="variable">$ldap_link</span>){
    ldap_<span class="built_in">set</span>_option(<span class="variable">$ldap_link</span>, LDAP_OPT_PROTOCOL_VERSION, <span class="number">3</span>);
    ldap_<span class="built_in">set</span>_option(<span class="variable">$ldap_link</span>, LDAP_OPT_REFERRALS, <span class="number">0</span>);
} <span class="keyword">else</span> {
    trigger_error(<span class="string">"Unable to connect to LDAP host."</span>, E_USER_ERROR);
}

<span class="keyword">if</span> (ldap_<span class="built_in">bind</span>(<span class="variable">$ldap_link</span>, <span class="string">"{<span class="variable">$username</span>}@{<span class="variable">$domain</span>}"</span>, <span class="variable">$password</span>)){
    // Success
}</code></pre>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c3d5d3e2c7e39708a5a78 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c3d5d3e2c7e39708a5a78' title="">Jul 15 2019 08:46 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p>Actually got it working with the following:</p><pre><code>LDAP_DOMAINS = {
    <span class="string">'thedomain.com'</span>: <span class="string">'%s@thedomain.local'</span>
}</code></pre><p>But now it sets email to<br><a href="mailto:username@thedomain.com" rel="nofollow">username@thedomain.com</a><br>Which is not correct, should be<br><a href="mailto:First.Last@thedomain.com" rel="nofollow">First.Last@thedomain.com</a><br>Which can be fetched from LDAP, but how to do that?</p>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c58823b41924785c1ee56 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c58823b41924785c1ee56' title="">Jul 15 2019 10:42 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      When email lookup for LDAP was added we weren&#39;t sure if there was a standard way to retrieve the email address. If you know of one let us know
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c59043596f56f8ce0adce burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      See <a href="https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54" rel="nofollow noopener noreferrer" target="_blank" class="link">https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54</a>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c5be14f7f9e219cf90861 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c5be14f7f9e219cf90861' title="">Jul 15 2019 10:56 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      To be honest the email address isn&#39;t used for anything for external auth providers like LDAP. It&#39;s useful for password recovery when using internally provided basic auth but for LDAP auth users should use standard IT processes for user management
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c5fe03e2c7e39708b55da burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c5fe03e2c7e39708b55da' title="">Jul 15 2019 11:13 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      Yes but we will send emails using the user database of Alerta is what we plan :)<br>I&#39;ve modified basic_ldap.py to our needs I think, how do I build a new container with this one? 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c5feb202bb93f00a8a90c burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      like a layer I guess but where to place the file
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c7d7ee190903936ecaff7 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c7d7ee190903936ecaff7' title="">Jul 15 2019 13:19 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      If you share the code we might be able to make it a config option.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c8bda202bb93f00a9f700 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c8bda202bb93f00a9f700' title="">Jul 15 2019 14:21 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      I&#39;m working on actually getting it to work. getting some strange errors when creating the user from the search email. <pre><code>web_1  | Traceback (most recent <span class="operator"><span class="keyword">call</span> <span class="keyword">last</span>):
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/flask/app.py"</span>, line <span class="number">1813</span>, <span class="keyword">in</span> full_dispatch_request
web_1  |     rv = <span class="keyword">self</span>.dispatch_request()
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/flask/app.py"</span>, line <span class="number">1799</span>, <span class="keyword">in</span> dispatch_request
web_1  |     <span class="keyword">return</span> <span class="keyword">self</span>.view_functions[rule.endpoint](**req.view_args)
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/flask_cors/decorator.py"</span>, line <span class="number">128</span>, <span class="keyword">in</span> wrapped_function
web_1  |     resp = make_response(<span class="keyword">f</span>(*args, **kwargs))
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/alerta/auth/basic_ldap.py"</span>, line <span class="number">101</span>, <span class="keyword">in</span> login
web_1  |     customers = get_customers(login=login, <span class="keyword">groups</span>=[<span class="keyword">user</span>.<span class="keyword">domain</span>] + <span class="keyword">groups</span>)
web_1  |   <span class="keyword">File</span> <span class="string">"/venv/lib/python3.6/site-packages/alerta/models/user.py"</span>, line <span class="number">46</span>, <span class="keyword">in</span> <span class="keyword">domain</span>
web_1  |     <span class="keyword">return</span> <span class="keyword">self</span>.email.<span class="keyword">split</span>(<span class="string">'@'</span>)[<span class="number">1</span>]
web_1  | TypeError: a <span class="keyword">bytes</span>-<span class="keyword">like</span> <span class="keyword">object</span> <span class="keyword">is</span> <span class="keyword">required</span>, <span class="keyword">not</span> <span class="string">'str'</span></span></code></pre>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c945e4d750532414d98d1 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c945e4d750532414d98d1' title="">Jul 15 2019 14:57 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p>This is now what I have done and this is working for my organizations setup with a big Active Directory of several thousand accounts actually. </p><pre><code>    <span class="keyword">try</span>:
        trace_level = <span class="number">2</span>
        ldap_connection = ldap.initialize(current_app.config[<span class="string">'LDAP_URL'</span>], trace_level=trace_level)
        ldap_connection.protocol_version = <span class="number">3</span>
        ldap_connection.set_option(ldap.OPT_REFERRALS, <span class="number">0</span>)
        ldap_connection.bind_s(userdn, password)
    <span class="keyword">except</span> ldap.INVALID_CREDENTIALS:
        <span class="keyword">raise</span> ApiError(<span class="string">'invalid username or password'</span>, <span class="number">401</span>)
    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
        <span class="keyword">raise</span> ApiError(str(e), <span class="number">500</span>)


    emaildn = current_app.config[<span class="string">'LDAP_DOMAINS_SEARCH_DN'</span>][domain]
    emailfilter = current_app.config[<span class="string">'LDAP_DOMAINS_SEARCH_FILTER'</span>][domain] % username

    <span class="comment"># Get email address from LDAP</span>
    <span class="keyword">if</span> <span class="keyword">not</span> email_verified:
        <span class="keyword">try</span>:
            print(<span class="string">'Running email'</span>)
            emailattr = [<span class="string">'mail'</span>]
            ldap_result = ldap_connection.search_s(emaildn, ldap.SCOPE_SUBTREE, emailfilter, emailattr)
            email = ldap_result[<span class="number">0</span>][<span class="number">1</span>][<span class="string">'mail'</span>][<span class="number">0</span>].decode(sys.stdout.encoding)
            email_verified = <span class="keyword">True</span>
        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
            <span class="keyword">raise</span> ApiError(str(e), <span class="number">500</span>)</code></pre><p>And in the conf</p><pre><code><span class="type">LDAP_DOMAINS</span> = {
    <span class="symbol">'host</span>.com': <span class="char">'%s@host.local'</span>
}

<span class="type">LDAP_DOMAINS_SEARCH_DN</span> = {
    <span class="symbol">'host</span>.com': <span class="symbol">'DC</span>=host,<span class="type">DC</span>=local'
}

<span class="type">LDAP_DOMAINS_SEARCH_FILTER</span> = {
    <span class="symbol">'host</span>.com': <span class="char">'(sAMAccountName=%s)'</span>
}</code></pre>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c99753596f56f8ce2a36d burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c99753596f56f8ce2a36d' title="">Jul 15 2019 15:19 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      The only thing I will need to change now is to not search for e-mail every time. Only the first time. 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c9b173b41924785c406aa burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-55512b0615522ed4b3e03e5b avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Stephane</div>
      <div class='chat-item__username js-chat-item-from'>@steevivo</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c9b173b41924785c406aa' title="">Jul 15 2019 15:26 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Hi Nick could you tell what‚Äôs  Alerta Release 7.0  different than beta.alerta.io features ? and the first release for  beta.alerta.io? In fact I have a big project with monitoring zabbix/prometheus, so can I use beta.alerta.io with minimal risk ? 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c9b743e2c7e39708d3b5f burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> and help you so with the debug and more üòÅ
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2c9b9c4d750532414dd0c6 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5d10d1edd73408ce4fc45d98 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/22174011?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>cisco92</div>
      <div class='chat-item__username js-chat-item-from'>@cisco92</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2c9b9c4d750532414dd0c6' title="">Jul 15 2019 15:28 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <p>I moved all the email search stuff in to the</p><pre><code><span class="keyword">if</span> <span class="keyword">not</span> user:</code></pre><p>part so now it works like I want it to :)<br>Maybe you got some ideas how to give options for LDAP Auth :) </p>
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cb4d33596f56f8ce3882c burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cb4d33596f56f8ce3882c' title="">Jul 15 2019 17:16 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="steevivo" class="mention">@steevivo</span> releases for the web UI and API are now done together. ie. both repos are tagged at the same time with version numbers that are compatible. The beta website is always master. ie. whenever there is a merge to master it is updated.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cb51b7dbfff3242b2b043 burstContinued read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__content'>
    <div class='chat-item__text js-chat-item-text'>
      You can use the latest version with minimal risk.
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cc35b570ac36f8d2d3902 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-5609cf680fc9f982beb22262 avatar-s offline  ">
  <img src="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=30" srcset="https://avatars0.githubusercontent.com/u/615057?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Nick Satterly</div>
      <div class='chat-item__username js-chat-item-from'>@satterly</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cc35b570ac36f8d2d3902' title="">Jul 15 2019 18:18 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="cisco92" class="mention">@cisco92</span> can you post a diff or PR somewhere so I can take a look. It&#39;s difficult to imagine what the code might look like from the above
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cddba4f7f9e219cfd1634 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-55512b0615522ed4b3e03e5b avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Stephane</div>
      <div class='chat-item__username js-chat-item-from'>@steevivo</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cddba4f7f9e219cfd1634' title="">Jul 15 2019 20:10 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Thanks a lot 
    </div>
  </div>
</div>
</div>
            <div class="chat-item model-id-5d2cfc685fa7895c4309d413 burstStart read  " role="listitem"><div class='chat-item__container'>
  <div class='chat-item__aside'>
    <div class="chat-item__avatar">
      <div
  class="trpDisplayPicture avatar-55512b0615522ed4b3e03e5b avatar-s offline  ">
  <img src="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=30" srcset="https://avatars2.githubusercontent.com/u/5672749?v=4&amp;s=60 2x" height="30" width="30" class="avatar__image" alt="">
  
</div>

    </div>
  </div>
  <div class='chat-item__content'>
    <div class='chat-item__details'>
      <div class='chat-item__from js-chat-item-from'>Stephane</div>
      <div class='chat-item__username js-chat-item-from'>@steevivo</div>
      <a class='chat-item__time js-chat-time'  href='https://gitter.im/alerta/chat/archives/2019/07/15?at=5d2cfc685fa7895c4309d413' title="">Jul 15 2019 22:21 UTC</a>
    </div>
    <div class='chat-item__text js-chat-item-text'>
      <span data-link-type="mention" data-screen-name="satterly" class="mention">@satterly</span> Hi Nick some strange trouble with Alerta when I type python &gt; Python 3.6.8, but when I launch  alerted run i have the message : ImportError: You are running Alerta 6.0 on Python 2
    </div>
  </div>
</div>
</div>
        </div>
      </div>

      <div id='initial' style="height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>
    </div>
  </div>
</div>

    </div>
  </div>

    <script type="text/javascript">window.gitterClientEnv = {"lang":"en","domain":"gitter.im","baseServer":"gitter.im","basePath":"https://gitter.im","apiBasePath":"https://gitter.im/api","homeUrl":"/","badgeBaseUrl":"https://badges.gitter.im","googleTrackingId":"UA-45918290-1","googleTrackingDomain":"gitter.im","env":"prod","cdns":["cdn01.gitter.im","cdn02.gitter.im","cdn03.gitter.im"],"version":"0d31b2","assetTag":"0d31b2aef","logging":false,"ravenUrl":"https://a1bf037f1d5f46f28b8e3b3e82024654@sentry.gitlab.net/42","websockets":{"fayeUrl":"https://ws.gitter.im/bayeux","options":{"timeout":120,"retry":2}},"avatarsUrl":"https://avatars.gitter.im","avatarCdns":["https://avatars-01.gitter.im","https://avatars-02.gitter.im","https://avatars-03.gitter.im","https://avatars-04.gitter.im","https://avatars-05.gitter.im"],"vapidAppServerKey":"BMhrlZd_I5OFJSJQTbg2mZ5PTHarzenwsKfsRd8C0-HRBygpDj9O3M4VTJIQfB9VPDjAoO_w2eg7Sj_cMXzuLwI","headlineNumbers":{"gitterUsers":"800K+","gitterRooms":"300K+","gitterGroups":"90K+","gitterCountries":"100+"},"inviteEmailAbuseThresholdPerDay":10};window.troupeContext = {"accessToken":"$gNW1n5ncwlBr/OZ20x5NEXPUiqOwDhQBgvtRSM5Xlkw=","isNativeDesktopApp":false,"locale":{"%d unread message":{"one":"%d unread message","other":"%d unread messages"},"Unread messages in %%s, %%s and one other":{"one":"Unread messages in %%s, %%s and one other","other":"Unread messages in %%s, %%s and %d others"},"Unread messages in %s":"Unread messages in %s","Unread messages in %s and %s":"Unread messages in %s and %s","Unread messages from %s":"Unread messages from %s","Unread messages from %s and %s":"Unread messages from %s and %s","Unread messages from %%s, %%s and one other":{"one":"Unread messages from %%s, %%s and one other","other":"Unread messages from %%s, %%s and %d others"},"Gitter is available in all modern browsers as well as apps for desktops.":"Gitter is available in all modern browsers as well as apps for desktops.","Mac":"Mac","Windows":"Windows","Linux 32":"Linux 32","Linux 64":"Linux 64","The above Mac installer is a signed version of 1.177 (backed by Safari). For an unsigned 4.1.0 installer (backed by <a %s>NW.js<\/a>), <a %s>click here to download<\/a>.":"The above Mac installer is a signed version of 1.177 (backed by Safari). For an unsigned 4.1.0 installer (backed by <a %s>NW.js<\/a>), <a %s>click here to download<\/a>.","Mac users on 10.9 or lower, <a %s>download here<\/a>.":"Mac users on 10.9 or lower, <a %s>download here<\/a>.","We also have a sweet little <a %s>IRC bridge<\/a>.":"We also have a sweet little <a %s>IRC bridge<\/a>.","The dedicated Android/iOS apps are no longer recommended and may be officially <a href='%s'>deprecated in the future<\/a>. For mobile, we recommend using the mobile web version in your browser.":"The dedicated Android/iOS apps are no longer recommended and may be officially <a href='%s'>deprecated in the future<\/a>. For mobile, we recommend using the mobile web version in your browser.","Our efforts are focused on the <a %s>webapp<\/a> which is the backbone of the mobile/desktop apps but mainly focused on the web experience. There are a number of bugs in these desktop/mobile clients and they spread the Gitter team too thin for us to give them proper attention. The apps are open-source if you want to tackle something particularly annoying to you.":"Our efforts are focused on the <a %s>webapp<\/a> which is the backbone of the mobile/desktop apps but mainly focused on the web experience. There are a number of bugs in these desktop/mobile clients and they spread the Gitter team too thin for us to give them proper attention. The apps are open-source if you want to tackle something particularly annoying to you.","desktop":"desktop","iOS":"iOS","Android":"Android","Support":"Support","API":"API","Blog":"Blog","Twitter":"Twitter"},"roomMember":false,"user":null,"troupe":{"id":"5609cf450fc9f982beb2225c","name":"alerta/chat","topic":"Alerta web next gen https://beta.alerta.io","avatarUrl":"https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b","uri":"alerta/chat","userCount":378,"url":"/alerta/chat","githubType":"ORG_CHANNEL","associatedRepo":false,"security":"PUBLIC","providers":["github"],"groupId":"57542c98c43b8c6019774b6b","group":{"id":"57542c98c43b8c6019774b6b","name":"alerta","uri":"alerta","homeUri":"alerta/home","backedBy":{"type":"GH_ORG","linkPath":"alerta"},"avatarUrl":"https://avatars-02.gitter.im/group/iv/4/57542c98c43b8c6019774b6b"},"backend":{"type":"GH_ORG","linkPath":"alerta"},"public":true,"v":3},"roomHasWelcomeMessage":false,"archive":{"archiveDate":"2019-07-15T00:00:00.000Z","nextDate":"2019-07-16T23:59:59.999Z","previousDate":"2019-07-14T00:00:00.000Z","messages":[{"id":"5d2bf882570ac36f8d274dc9","text":"@satterly Curl to the  http:IP gets me to the default Nginx webpage which means Ngnix web server is working but curling to the http:ip/api gets the error.   I am unclear as to where to look. Do you mean to look at the Alerta/Uwsgi configuration?","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Curl to the  http:IP gets me to the default Nginx webpage which means Ngnix web server is working but curling to the http:ip/api gets the error.   I am unclear as to where to look. Do you mean to look at the Alerta/Uwsgi configuration?","sent":"2019-07-15T03:52:34.822Z","fromUser":{"id":"5d28eb35d73408ce4fc5eee7","username":"Yu6936","displayName":"Yu6936","url":"/Yu6936","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/Yu6936","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/32713607?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/32713607?v=4&s=128","v":3,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c196a570ac36f8d2827b2","text":"@Yu6936 The error from /api Will be different from the error reported by the client. What's the exact output you get when you curl?","html":"<span data-link-type=\"mention\" data-screen-name=\"Yu6936\" class=\"mention\">@Yu6936<\/span> The error from /api Will be different from the error reported by the client. What&#39;s the exact output you get when you curl?","sent":"2019-07-15T06:12:58.566Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":11,"urls":[],"mentions":[{"screenName":"Yu6936","userId":"5d28eb35d73408ce4fc5eee7","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c2aea3b41924785c09fd7","text":"@moix @satterly Hi again, sorry for a late reply, only working on this when I'm at work .\nWe got it working with \n```\nCN=%s,DN=thedomain,DN=internal\n```\nThe issue is that CN is a full name parameter, and we want username, which in our directory is sAMAccountName.\nAnyone knows how to use sAMAccountName in this basic_ldap.py setup? ","html":"<p><span data-link-type=\"mention\" data-screen-name=\"moix\" class=\"mention\">@moix<\/span> <span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Hi again, sorry for a late reply, only working on this when I&#39;m at work .<br>We got it working with <\/p><pre><code>CN=%s,DN=thedomain,DN=<span class=\"keyword\">internal<\/span><\/code><\/pre><p>The issue is that CN is a full name parameter, and we want username, which in our directory is sAMAccountName.<br>Anyone knows how to use sAMAccountName in this basic_ldap.py setup? <\/p>","sent":"2019-07-15T07:27:38.349Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":11,"urls":[],"mentions":[{"screenName":"moix","userId":"5d14be9bd73408ce4fc4a8a1","userIds":[]},{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c2bb4202bb93f00a72605","text":"I'm not that experienced with Python and LDAP setups in that language. But in PHP this would be done very simply with this code:\n```\n$ldap_host       = \"theserver.omaccess.net\";\n$domain          = \"thedomain.local\";\n\n$ldap_link = ldap_connect($ldap_host);\nif ($ldap_link){\n    ldap_set_option($ldap_link, LDAP_OPT_PROTOCOL_VERSION, 3);\n    ldap_set_option($ldap_link, LDAP_OPT_REFERRALS, 0);\n} else {\n    trigger_error(\"Unable to connect to LDAP host.\", E_USER_ERROR);\n}\n\nif (ldap_bind($ldap_link, \"{$username}@{$domain}\", $password)){\n    // Success\n}\n```","html":"I&#39;m not that experienced with Python and LDAP setups in that language. But in PHP this would be done very simply with this code:<pre><code><span class=\"variable\">$ldap_host<\/span>       = <span class=\"string\">\"theserver.omaccess.net\"<\/span>;\n<span class=\"variable\">$domain<\/span>          = <span class=\"string\">\"thedomain.local\"<\/span>;\n\n<span class=\"variable\">$ldap_link<\/span> = ldap_connect(<span class=\"variable\">$ldap_host<\/span>);\n<span class=\"keyword\">if<\/span> (<span class=\"variable\">$ldap_link<\/span>){\n    ldap_<span class=\"built_in\">set<\/span>_option(<span class=\"variable\">$ldap_link<\/span>, LDAP_OPT_PROTOCOL_VERSION, <span class=\"number\">3<\/span>);\n    ldap_<span class=\"built_in\">set<\/span>_option(<span class=\"variable\">$ldap_link<\/span>, LDAP_OPT_REFERRALS, <span class=\"number\">0<\/span>);\n} <span class=\"keyword\">else<\/span> {\n    trigger_error(<span class=\"string\">\"Unable to connect to LDAP host.\"<\/span>, E_USER_ERROR);\n}\n\n<span class=\"keyword\">if<\/span> (ldap_<span class=\"built_in\">bind<\/span>(<span class=\"variable\">$ldap_link<\/span>, <span class=\"string\">\"{<span class=\"variable\">$username<\/span>}@{<span class=\"variable\">$domain<\/span>}\"<\/span>, <span class=\"variable\">$password<\/span>)){\n    // Success\n}<\/code><\/pre>","sent":"2019-07-15T07:31:00.615Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":11,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c3d5d3e2c7e39708a5a78","text":"Actually got it working with the following:\n```\nLDAP_DOMAINS = {\n    'thedomain.com': '%s@thedomain.local'\n}\n```\nBut now it sets email to\nusername@thedomain.com\nWhich is not correct, should be \nFirst.Last@thedomain.com\nWhich can be fetched from LDAP, but how to do that?","html":"<p>Actually got it working with the following:<\/p><pre><code>LDAP_DOMAINS = {\n    <span class=\"string\">'thedomain.com'<\/span>: <span class=\"string\">'%s@thedomain.local'<\/span>\n}<\/code><\/pre><p>But now it sets email to<br><a href=\"mailto:username@thedomain.com\" rel=\"nofollow\">username@thedomain.com<\/a><br>Which is not correct, should be<br><a href=\"mailto:First.Last@thedomain.com\" rel=\"nofollow\">First.Last@thedomain.com<\/a><br>Which can be fetched from LDAP, but how to do that?<\/p>","sent":"2019-07-15T08:46:21.166Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[{"url":"mailto:username@thedomain.com"},{"url":"mailto:First.Last@thedomain.com"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c58823b41924785c1ee56","text":"When email lookup for LDAP was added we weren't sure if there was a standard way to retrieve the email address. If you know of one let us know","html":"When email lookup for LDAP was added we weren&#39;t sure if there was a standard way to retrieve the email address. If you know of one let us know","sent":"2019-07-15T10:42:10.211Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c59043596f56f8ce0adce","text":"See https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54","html":"See <a href=\"https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54\" rel=\"nofollow noopener noreferrer\" target=\"_blank\" class=\"link\">https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54<\/a>","sent":"2019-07-15T10:44:20.851Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[{"url":"https://github.com/alerta/alerta/blob/6a9fab8b1bd85ef695faadfcc22f26c8d48b2d9e/alerta/auth/basic_ldap.py#L54"}],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c5be14f7f9e219cf90861","text":"To be honest the email address isn't used for anything for external auth providers like LDAP. It's useful for password recovery when using internally provided basic auth but for LDAP auth users should use standard IT processes for user management","html":"To be honest the email address isn&#39;t used for anything for external auth providers like LDAP. It&#39;s useful for password recovery when using internally provided basic auth but for LDAP auth users should use standard IT processes for user management","sent":"2019-07-15T10:56:33.967Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c5fe03e2c7e39708b55da","text":"Yes but we will send emails using the user database of Alerta is what we plan :) \nI've modified basic_ldap.py to our needs I think, how do I build a new container with this one? ","html":"Yes but we will send emails using the user database of Alerta is what we plan :)<br>I&#39;ve modified basic_ldap.py to our needs I think, how do I build a new container with this one? ","sent":"2019-07-15T11:13:36.525Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c5feb202bb93f00a8a90c","text":"like a layer I guess but where to place the file","html":"like a layer I guess but where to place the file","sent":"2019-07-15T11:13:47.025Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c7d7ee190903936ecaff7","text":"If you share the code we might be able to make it a config option.","html":"If you share the code we might be able to make it a config option.","sent":"2019-07-15T13:19:58.371Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c8bda202bb93f00a9f700","text":"I'm working on actually getting it to work. getting some strange errors when creating the user from the search email. \n```\nweb_1  | Traceback (most recent call last):\nweb_1  |   File \"/venv/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\nweb_1  |     rv = self.dispatch_request()\nweb_1  |   File \"/venv/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\nweb_1  |     return self.view_functions[rule.endpoint](**req.view_args)\nweb_1  |   File \"/venv/lib/python3.6/site-packages/flask_cors/decorator.py\", line 128, in wrapped_function\nweb_1  |     resp = make_response(f(*args, **kwargs))\nweb_1  |   File \"/venv/lib/python3.6/site-packages/alerta/auth/basic_ldap.py\", line 101, in login\nweb_1  |     customers = get_customers(login=login, groups=[user.domain] + groups)\nweb_1  |   File \"/venv/lib/python3.6/site-packages/alerta/models/user.py\", line 46, in domain\nweb_1  |     return self.email.split('@')[1]\nweb_1  | TypeError: a bytes-like object is required, not 'str'\n```","html":"I&#39;m working on actually getting it to work. getting some strange errors when creating the user from the search email. <pre><code>web_1  | Traceback (most recent <span class=\"operator\"><span class=\"keyword\">call<\/span> <span class=\"keyword\">last<\/span>):\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/flask/app.py\"<\/span>, line <span class=\"number\">1813<\/span>, <span class=\"keyword\">in<\/span> full_dispatch_request\nweb_1  |     rv = <span class=\"keyword\">self<\/span>.dispatch_request()\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/flask/app.py\"<\/span>, line <span class=\"number\">1799<\/span>, <span class=\"keyword\">in<\/span> dispatch_request\nweb_1  |     <span class=\"keyword\">return<\/span> <span class=\"keyword\">self<\/span>.view_functions[rule.endpoint](**req.view_args)\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/flask_cors/decorator.py\"<\/span>, line <span class=\"number\">128<\/span>, <span class=\"keyword\">in<\/span> wrapped_function\nweb_1  |     resp = make_response(<span class=\"keyword\">f<\/span>(*args, **kwargs))\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/alerta/auth/basic_ldap.py\"<\/span>, line <span class=\"number\">101<\/span>, <span class=\"keyword\">in<\/span> login\nweb_1  |     customers = get_customers(login=login, <span class=\"keyword\">groups<\/span>=[<span class=\"keyword\">user<\/span>.<span class=\"keyword\">domain<\/span>] + <span class=\"keyword\">groups<\/span>)\nweb_1  |   <span class=\"keyword\">File<\/span> <span class=\"string\">\"/venv/lib/python3.6/site-packages/alerta/models/user.py\"<\/span>, line <span class=\"number\">46<\/span>, <span class=\"keyword\">in<\/span> <span class=\"keyword\">domain<\/span>\nweb_1  |     <span class=\"keyword\">return<\/span> <span class=\"keyword\">self<\/span>.email.<span class=\"keyword\">split<\/span>(<span class=\"string\">'@'<\/span>)[<span class=\"number\">1<\/span>]\nweb_1  | TypeError: a <span class=\"keyword\">bytes<\/span>-<span class=\"keyword\">like<\/span> <span class=\"keyword\">object<\/span> <span class=\"keyword\">is<\/span> <span class=\"keyword\">required<\/span>, <span class=\"keyword\">not<\/span> <span class=\"string\">'str'<\/span><\/span><\/code><\/pre>","sent":"2019-07-15T14:21:14.728Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":10,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c945e4d750532414d98d1","text":"This is now what I have done and this is working for my organizations setup with a big Active Directory of several thousand accounts actually. \n```\n    try:\n        trace_level = 2\n        ldap_connection = ldap.initialize(current_app.config['LDAP_URL'], trace_level=trace_level)\n        ldap_connection.protocol_version = 3\n        ldap_connection.set_option(ldap.OPT_REFERRALS, 0)\n        ldap_connection.bind_s(userdn, password)\n    except ldap.INVALID_CREDENTIALS:\n        raise ApiError('invalid username or password', 401)\n    except Exception as e:\n        raise ApiError(str(e), 500)\n\n\n    emaildn = current_app.config['LDAP_DOMAINS_SEARCH_DN'][domain]\n    emailfilter = current_app.config['LDAP_DOMAINS_SEARCH_FILTER'][domain] % username\n\n    # Get email address from LDAP\n    if not email_verified:\n        try:\n            print('Running email')\n            emailattr = ['mail']\n            ldap_result = ldap_connection.search_s(emaildn, ldap.SCOPE_SUBTREE, emailfilter, emailattr)\n            email = ldap_result[0][1]['mail'][0].decode(sys.stdout.encoding)\n            email_verified = True\n        except Exception as e:\n            raise ApiError(str(e), 500)\n```\nAnd in the conf\n```\nLDAP_DOMAINS = {\n    'host.com': '%s@host.local'\n}\n\nLDAP_DOMAINS_SEARCH_DN = {\n\t'host.com': 'DC=host,DC=local'\n}\n\nLDAP_DOMAINS_SEARCH_FILTER = {\n\t'host.com': '(sAMAccountName=%s)'\n}\n```","html":"<p>This is now what I have done and this is working for my organizations setup with a big Active Directory of several thousand accounts actually. <\/p><pre><code>    <span class=\"keyword\">try<\/span>:\n        trace_level = <span class=\"number\">2<\/span>\n        ldap_connection = ldap.initialize(current_app.config[<span class=\"string\">'LDAP_URL'<\/span>], trace_level=trace_level)\n        ldap_connection.protocol_version = <span class=\"number\">3<\/span>\n        ldap_connection.set_option(ldap.OPT_REFERRALS, <span class=\"number\">0<\/span>)\n        ldap_connection.bind_s(userdn, password)\n    <span class=\"keyword\">except<\/span> ldap.INVALID_CREDENTIALS:\n        <span class=\"keyword\">raise<\/span> ApiError(<span class=\"string\">'invalid username or password'<\/span>, <span class=\"number\">401<\/span>)\n    <span class=\"keyword\">except<\/span> Exception <span class=\"keyword\">as<\/span> e:\n        <span class=\"keyword\">raise<\/span> ApiError(str(e), <span class=\"number\">500<\/span>)\n\n\n    emaildn = current_app.config[<span class=\"string\">'LDAP_DOMAINS_SEARCH_DN'<\/span>][domain]\n    emailfilter = current_app.config[<span class=\"string\">'LDAP_DOMAINS_SEARCH_FILTER'<\/span>][domain] % username\n\n    <span class=\"comment\"># Get email address from LDAP<\/span>\n    <span class=\"keyword\">if<\/span> <span class=\"keyword\">not<\/span> email_verified:\n        <span class=\"keyword\">try<\/span>:\n            print(<span class=\"string\">'Running email'<\/span>)\n            emailattr = [<span class=\"string\">'mail'<\/span>]\n            ldap_result = ldap_connection.search_s(emaildn, ldap.SCOPE_SUBTREE, emailfilter, emailattr)\n            email = ldap_result[<span class=\"number\">0<\/span>][<span class=\"number\">1<\/span>][<span class=\"string\">'mail'<\/span>][<span class=\"number\">0<\/span>].decode(sys.stdout.encoding)\n            email_verified = <span class=\"keyword\">True<\/span>\n        <span class=\"keyword\">except<\/span> Exception <span class=\"keyword\">as<\/span> e:\n            <span class=\"keyword\">raise<\/span> ApiError(str(e), <span class=\"number\">500<\/span>)<\/code><\/pre><p>And in the conf<\/p><pre><code><span class=\"type\">LDAP_DOMAINS<\/span> = {\n    <span class=\"symbol\">'host<\/span>.com': <span class=\"char\">'%s@host.local'<\/span>\n}\n\n<span class=\"type\">LDAP_DOMAINS_SEARCH_DN<\/span> = {\n    <span class=\"symbol\">'host<\/span>.com': <span class=\"symbol\">'DC<\/span>=host,<span class=\"type\">DC<\/span>=local'\n}\n\n<span class=\"type\">LDAP_DOMAINS_SEARCH_FILTER<\/span> = {\n    <span class=\"symbol\">'host<\/span>.com': <span class=\"char\">'(sAMAccountName=%s)'<\/span>\n}<\/code><\/pre>","sent":"2019-07-15T14:57:34.681Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":11,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c99753596f56f8ce2a36d","text":"The only thing I will need to change now is to not search for e-mail every time. Only the first time. ","html":"The only thing I will need to change now is to not search for e-mail every time. Only the first time. ","sent":"2019-07-15T15:19:17.840Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":12,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c9b173b41924785c406aa","text":"@satterly Hi Nick could you tell what‚Äôs  Alerta Release 7.0  different than beta.alerta.io features ? and the first release for  beta.alerta.io? In fact I have a big project with monitoring zabbix/prometheus, so can I use beta.alerta.io with minimal risk ? ","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Hi Nick could you tell what‚Äôs  Alerta Release 7.0  different than beta.alerta.io features ? and the first release for  beta.alerta.io? In fact I have a big project with monitoring zabbix/prometheus, so can I use beta.alerta.io with minimal risk ? ","sent":"2019-07-15T15:26:15.499Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2c9b743e2c7e39708d3b5f","text":"@satterly and help you so with the debug and more üòÅ","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> and help you so with the debug and more üòÅ","sent":"2019-07-15T15:27:48.433Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2c9b9c4d750532414dd0c6","text":"I moved all the email search stuff in to the\n```\nif not user:\n```\npart so now it works like I want it to :) \nMaybe you got some ideas how to give options for LDAP Auth :) ","html":"<p>I moved all the email search stuff in to the<\/p><pre><code><span class=\"keyword\">if<\/span> <span class=\"keyword\">not<\/span> user:<\/code><\/pre><p>part so now it works like I want it to :)<br>Maybe you got some ideas how to give options for LDAP Auth :) <\/p>","sent":"2019-07-15T15:28:28.242Z","fromUser":{"id":"5d10d1edd73408ce4fc45d98","username":"cisco92","displayName":"cisco92","url":"/cisco92","avatarUrl":"https://avatars-05.gitter.im/gh/uv/4/cisco92","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/22174011?v=4&s=128","v":15,"gv":"4"},"readBy":12,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cb4d33596f56f8ce3882c","text":"@steevivo releases for the web UI and API are now done together. ie. both repos are tagged at the same time with version numbers that are compatible. The beta website is always master. ie. whenever there is a merge to master it is updated.","html":"<span data-link-type=\"mention\" data-screen-name=\"steevivo\" class=\"mention\">@steevivo<\/span> releases for the web UI and API are now done together. ie. both repos are tagged at the same time with version numbers that are compatible. The beta website is always master. ie. whenever there is a merge to master it is updated.","sent":"2019-07-15T17:16:03.602Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":12,"urls":[],"mentions":[{"screenName":"steevivo","userId":"55512b0615522ed4b3e03e5b","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cb51b7dbfff3242b2b043","text":"You can use the latest version with minimal risk.","html":"You can use the latest version with minimal risk.","sent":"2019-07-15T17:17:15.808Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":13,"urls":[],"mentions":[],"issues":[],"meta":[],"v":1,"burstStart":false},{"id":"5d2cc35b570ac36f8d2d3902","text":"@cisco92 can you post a diff or PR somewhere so I can take a look. It's difficult to imagine what the code might look like from the above","html":"<span data-link-type=\"mention\" data-screen-name=\"cisco92\" class=\"mention\">@cisco92<\/span> can you post a diff or PR somewhere so I can take a look. It&#39;s difficult to imagine what the code might look like from the above","sent":"2019-07-15T18:18:03.144Z","fromUser":{"id":"5609cf680fc9f982beb22262","username":"satterly","displayName":"Nick Satterly","url":"/satterly","avatarUrl":"https://avatars-03.gitter.im/gh/uv/4/satterly","avatarUrlSmall":"https://avatars0.githubusercontent.com/u/615057?v=4&s=60","avatarUrlMedium":"https://avatars0.githubusercontent.com/u/615057?v=4&s=128","v":29,"gv":"4"},"readBy":13,"urls":[],"mentions":[{"screenName":"cisco92","userId":"5d10d1edd73408ce4fc45d98","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cddba4f7f9e219cfd1634","text":"@satterly Thanks a lot ","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Thanks a lot ","sent":"2019-07-15T20:10:34.125Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":14,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true},{"id":"5d2cfc685fa7895c4309d413","text":"@satterly Hi Nick some strange trouble with Alerta when I type python > Python 3.6.8, but when I launch  alerted run i have the message : ImportError: You are running Alerta 6.0 on Python 2","html":"<span data-link-type=\"mention\" data-screen-name=\"satterly\" class=\"mention\">@satterly<\/span> Hi Nick some strange trouble with Alerta when I type python &gt; Python 3.6.8, but when I launch  alerted run i have the message : ImportError: You are running Alerta 6.0 on Python 2","sent":"2019-07-15T22:21:28.745Z","fromUser":{"id":"55512b0615522ed4b3e03e5b","username":"steevivo","displayName":"Stephane","url":"/steevivo","avatarUrl":"https://avatars-01.gitter.im/gh/uv/4/steevivo","avatarUrlSmall":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=60","avatarUrlMedium":"https://avatars2.githubusercontent.com/u/5672749?v=4&s=128","v":52,"gv":"4"},"readBy":13,"urls":[],"mentions":[{"screenName":"satterly","userId":"5609cf680fc9f982beb22262","userIds":[]}],"issues":[],"meta":[],"v":1,"burstStart":true}]}};</script>

    
    <script type="text/javascript">window.webpackPublicPath = '//cdn02.gitter.im/_s/0d31b2aef/js/';</script>
    <script type="text/javascript" src="//cdn01.gitter.im/_s/0d31b2aef/js/runtime.bundle.js"></script>
<script type="text/javascript" src="//cdn03.gitter.im/_s/0d31b2aef/js/vendor.chunk.js"></script>
<script type="text/javascript" src="//cdn02.gitter.im/_s/0d31b2aef/js/default.chunk.js"></script>
<script type="text/javascript" src="//cdn03.gitter.im/_s/0d31b2aef/js/router-archive-chat.chunk.js"></script>
  
</body>
</html>
